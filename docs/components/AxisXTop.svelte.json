{"main":{"slug":"AxisXTop.svelte","contents":"<!--\n  @component\n  Generates an SVG top x-axis. This component is also configured to detect if your x-scale is an ordinal scale. If so, it will place the markers in the middle of the bandwidth.\n -->\n<script>\n  import { getContext } from 'svelte';\n\n  const { width, height, xScale, yRange } = getContext('LayerCake');\n\n  /** @type {boolean} [tickMarks=false] - Show a vertical mark for each tick. */\n  export let tickMarks = false;\n\n  /** @type {boolean} [gridlines=true] - Show gridlines extending into the chart area. */\n  export let gridlines = true;\n\n  /** @type {Number} [tickMarkLength=6] - The length of the tick mark. */\n  export let tickMarkLength = 6;\n\n  /** @type {boolean} [baseline=false] - Show a solid line at the bottom. */\n  export let baseline = false;\n\n  /** @type {boolean} [snapLabels=false] - Instead of centering the text labels on the first and the last items, align them to the edges of the chart. */\n  export let snapLabels = false;\n\n  /** @type {(d: any) => string} [format=d => d] - A function that passes the current tick value and expects a nicely formatted value in return. */\n  export let format = d => d;\n\n  /** @type {Number|Array<any>|Function|undefined} [ticks] - If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. If nothing, it uses the default ticks supplied by the D3 function. */\n  export let ticks = undefined;\n\n  /** @type {Number} [tickGutter=0] - The amount of whitespace between the start of the tick and the chart drawing area (the xRange min). */\n  export let tickGutter = 0;\n\n  /** @type {Number} [dx=0] - Any optional value passed to the `dx` attribute on the text label. */\n  export let dx = 0;\n\n  /** @type {Number} [dy=-4] - Any optional value passed to the `dy` attribute on the text label. */\n  export let dy = -4;\n\n  /**@param {Number} i\n   * @param {boolean} sl */\n  function textAnchor(i, sl) {\n    if (sl === true) {\n      if (i === 0) {\n        return 'start';\n      }\n      if (i === tickVals.length - 1) {\n        return 'end';\n      }\n    }\n    return 'middle';\n  }\n\n  $: tickLen = tickMarks === true ? (tickMarkLength ?? 6) : 0;\n\n  $: isBandwidth = typeof $xScale.bandwidth === 'function';\n\n  /** @type {Array<any>} */\n  $: tickVals = Array.isArray(ticks)\n    ? ticks\n    : isBandwidth\n      ? $xScale.domain()\n      : typeof ticks === 'function'\n        ? ticks($xScale.ticks())\n        : $xScale.ticks(ticks);\n\n  $: halfBand = isBandwidth ? $xScale.bandwidth() / 2 : 0;\n</script>\n\n<g class=\"axis x-axis\" class:snapLabels>\n  {#each tickVals as tick, i (tick)}\n    {#if baseline === true}\n      <line class=\"baseline\" y1=\"0\" y2=\"0\" x1=\"0\" x2={$width} />\n    {/if}\n\n    <g class=\"tick tick-{i}\" transform=\"translate({$xScale(tick)},{Math.min(...$yRange)})\">\n      {#if gridlines === true}\n        <line class=\"gridline\" x1=\"0\" x2=\"0\" y1={$height} y2=\"0\" />\n      {/if}\n      {#if tickMarks === true}\n        <line\n          class=\"tick-mark\"\n          x1={halfBand}\n          x2={halfBand}\n          y1={-tickGutter}\n          y2={-tickLen - tickGutter}\n        />\n      {/if}\n      <text x={halfBand} y={-tickGutter - tickLen} {dx} {dy} text-anchor={textAnchor(i, snapLabels)}\n        >{format(tick)}</text\n      >\n    </g>\n  {/each}\n</g>\n\n<style>\n  .tick {\n    font-size: 11px;\n  }\n\n  line,\n  .tick line {\n    stroke: #aaa;\n    stroke-dasharray: 2;\n  }\n\n  .tick text {\n    fill: #666;\n  }\n\n  .tick .tick-mark,\n  .baseline {\n    stroke-dasharray: 0;\n  }\n  /* This looks slightly better */\n  .axis.snapLabels .tick:last-child text {\n    transform: translateX(3px);\n  }\n  .axis.snapLabels .tick.tick-0 text {\n    transform: translateX(-3px);\n  }\n</style>"},"dek":"","usedIn":[{"group":"Regular","matches":[]},{"group":"SSR","matches":[]}],"hasjsDoctable":true,"jsdocParsed":[{"kind":"type","type":"boolean","name":"tickMarks","required":false,"defaultValue":"false","description":"Show a vertical mark for each tick."},{"kind":"type","type":"boolean","name":"gridlines","required":false,"defaultValue":"true","description":"Show gridlines extending into the chart area."},{"kind":"type","type":"Number","name":"tickMarkLength","required":false,"defaultValue":"6","description":"The length of the tick mark."},{"kind":"type","type":"boolean","name":"baseline","required":false,"defaultValue":"false","description":"Show a solid line at the bottom."},{"kind":"type","type":"boolean","name":"snapLabels","required":false,"defaultValue":"false","description":"Instead of centering the text labels on the first and the last items, align them to the edges of the chart."},{"kind":"type","type":"(d: any) => string","name":"format","required":false,"defaultValue":"d => d","description":"A function that passes the current tick value and expects a nicely formatted value in return."},{"kind":"type","type":"Number|Array<any>|Function|undefined","name":"ticks","required":false,"defaultValue":null,"description":"If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. If nothing, it uses the default ticks supplied by the D3 function."},{"kind":"type","type":"Number","name":"tickGutter","required":false,"defaultValue":"0","description":"The amount of whitespace between the start of the tick and the chart drawing area (the xRange min)."},{"kind":"type","type":"Number","name":"dx","required":false,"defaultValue":"0","description":"Any optional value passed to the `dx` attribute on the text label."},{"kind":"type","type":"Number","name":"dy","required":false,"defaultValue":"-4","description":"Any optional value passed to the `dy` attribute on the text label."}],"componentDescription":"\n  Generates an SVG top x-axis. This component is also configured to detect if your x-scale is an ordinal scale. If so, it will place the markers in the middle of the bandwidth.\n \n","modules":[]}