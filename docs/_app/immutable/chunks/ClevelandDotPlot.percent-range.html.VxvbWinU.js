import{o as xt,a as b,w as $t,c as D,n as ht,b as S,f as ct,s as rt,t as T,i as n,j as gt}from"./disclose-version.DBj9Vt0q.js";import{p as at,aj as it,A as q,B as vt,r as B,a as st,x as N,z as K,h as t,m as j,s as L,ak as y,l as Mt}from"./runtime.D9nQNyi8.js";import{i as et}from"./if.CfD4apJF.js";import{s as F,e as dt,t as Rt,a as wt,i as ut}from"./class.ClfF0HVi.js";import{s as m,q as Bt,f as Ct}from"./Brush.html.Bk-i1qZL.js";import{p as a,b as zt}from"./index-client.CFCBblPQ.js";import{i as nt}from"./lifecycle.fbi-k1SI.js";import{u as lt,s as o}from"./store.Co5usZpv.js";var At=$t("<title> </title>"),Vt=$t('<svg preserveAspectRatio="none" style="right:0px; bottom:0px;" class="svelte-6sm8ei"><!><defs><!></defs><!></svg>');function de(Q,e){var z,w;at(e,!1);const i={};lt(i);const _=()=>o(s,"$padding",i),{padding:s}=it("LayerCake");let f=a(e,"element",4,void 0),x=a(e,"zIndex",0,void 0),k=a(e,"pointerEvents",0,void 0),r=a(e,"fixedAspectRatio",0,1),v=a(e,"viewBox",12,()=>`0 0 100 ${100/r()}`),$=a(e,"label",0,void 0),U=a(e,"labelledBy",0,void 0),O=a(e,"describedBy",0,void 0),W=a(e,"title",0,void 0);q(()=>N(r()),()=>{v(`0 0 100 ${100/r()}`)}),vt(),nt();var d=Vt();zt(d,A=>f(A),()=>f());var P=D(d);xt(P,(z=e.$$slots)==null?void 0:z.title,{},A=>{var u=ht(),G=ct(u);et(G,W,l=>{var g=At(),h=D(g);B(()=>rt(h,W())),b(l,g)}),b(A,u)});var M=S(P),c=D(M);xt(c,(w=e.$$slots)==null?void 0:w.defs,{},null);var C=S(M);xt(C,e.children,{get element(){return f()}},null),B(()=>{F(d,"viewBox",v()),F(d,"aria-label",$()),F(d,"aria-labelledby",U()),F(d,"aria-describedby",O()),m(d,"z-index",x()),m(d,"pointer-events",k()===!1?"none":null),m(d,"top",_().top+"px"),m(d,"left",_().left+"px"),m(d,"width",`calc(100% - ${_().left+_().right}px)`),m(d,"height",`calc(100% - ${_().top+_().bottom}px)`)}),b(Q,d),st()}var Tt=T('<div class="baseline svelte-fdkjmm" style="top:100%; width:100%;"></div>'),Ut=T('<div class="gridline svelte-fdkjmm" style="top:0; bottom:0;"></div>'),qt=T('<div class="tick-mark svelte-fdkjmm"></div>'),Kt=T('<!> <!> <!> <div><div class="text svelte-fdkjmm"> </div></div>',1),Wt=T('<div class="axis x-axis svelte-fdkjmm"></div>');function oe(Q,e){at(e,!1);const i={};lt(i);const _=()=>o($,"$percentRange",i),s=()=>o(v,"$xScale",i),f=j(),x=j(),k=j(),r=j(),{xScale:v,percentRange:$}=it("LayerCake");let U=a(e,"tickMarks",0,!1),O=a(e,"gridlines",0,!0),W=a(e,"tickMarkLength",0,6),d=a(e,"baseline",0,!1),P=a(e,"snapLabels",0,!1),M=a(e,"format",0,G=>G),c=a(e,"ticks",0,void 0),C=a(e,"tickGutter",0,0),z=a(e,"dx",0,0),w=a(e,"dy",0,0),A=a(e,"units",8,()=>_()===!0?"%":"px");q(()=>(N(U()),N(W())),()=>{L(f,U()===!0?W()??6:0)}),q(()=>s(),()=>{L(x,typeof s().bandwidth=="function")}),q(()=>(N(c()),t(x),s()),()=>{L(k,Array.isArray(c())?c():t(x)?s().domain():typeof c()=="function"?c()(s().ticks()):s().ticks(c()))}),q(()=>(t(x),s()),()=>{L(r,t(x)?s().bandwidth()/2:0)}),vt(),nt();var u=Wt();dt(u,15,()=>t(k),(G,l)=>K(G),(G,l,g)=>{var h=Kt();const R=y(()=>s()(K(l)));var X=ct(h);et(X,()=>d()===!0,H=>{var I=Tt();b(H,I)});var E=S(S(X,!0));et(E,()=>O()===!0,H=>{var I=Ut();B(()=>m(I,"left",`${n(t(R))}${n(A())}`)),b(H,I)});var p=S(S(E,!0));et(p,()=>U()===!0,H=>{var I=qt();B(()=>{m(I,"left",`${n(t(R)+t(r))}${n(A())}`),m(I,"height",`${n(t(f))}px`),m(I,"bottom",`${n(-t(f)-C())}px`)}),b(H,I)});var V=S(S(p,!0)),Z=D(V),Y=D(Z);B(()=>rt(Y,M()(K(l)))),B(()=>{wt(V,`tick tick-${n(K(g))} svelte-fdkjmm`),F(V,"style",`top:calc(100% + ${n(C())}px);`),m(V,"left",`${n(t(R)+t(r))}${n(A())}`),m(Z,"top",`${n(t(f))}px`),m(Z,"transform",`translate(calc(-50% + ${n(z())}px), ${n(w())}px)`)}),b(G,h)}),B(()=>Rt(u,"snapLabels",P())),b(Q,u),st()}var It=T('<div class="gridline svelte-1jmrx3z" style="top:0;"></div>'),Ot=T('<div class="tick-mark svelte-1jmrx3z"></div>'),Pt=T('<div><!> <!> <div class="text svelte-1jmrx3z"> </div></div>'),Et=T('<div class="axis y-axis svelte-1jmrx3z"></div>');function ve(Q,e){at(e,!1);const i={};lt(i);const _=()=>o(P,"$percentRange",i),s=()=>o(d,"$yScale",i),f=()=>o(W,"$xRange",i),x=j(),k=j(),r=j(),v=j(),$=j(),U=j(),O=j(),{xRange:W,yScale:d,percentRange:P}=it("LayerCake");let M=a(e,"tickMarks",0,!1),c=a(e,"labelPosition",0,"even"),C=a(e,"snapBaselineLabel",0,!1),z=a(e,"gridlines",0,!0),w=a(e,"tickMarkLength",0,void 0),A=a(e,"format",0,p=>p),u=a(e,"ticks",0,4),G=a(e,"tickGutter",0,0),l=a(e,"dx",0,0),g=a(e,"dy",8,()=>-3),h=a(e,"charPixelWidth",0,7.25),R=a(e,"units",8,()=>_()===!0?"%":"px");function X(p,V){return V===","||V==="."?p+h()*.5:p+h()}q(()=>s(),()=>{L(x,typeof s().bandwidth=="function")}),q(()=>(N(u()),t(x),s()),()=>{L(k,Array.isArray(u())?u():t(x)?s().domain():typeof u()=="function"?u()(s().ticks()):s().ticks(u()))}),q(()=>(t(k),N(A())),()=>{L(v,Math.max(10,Math.max(...t(k).map(p=>A()(p).toString().split("").reduce(X,0)))))}),q(()=>(N(M()),N(c()),N(w()),t(v)),()=>{L(r,M()===!0?c()==="above"?w()??t(v):w()??6:0)}),q(()=>(N(G()),N(c()),t(v),t(r)),()=>{L($,-G()-(c()==="above"?t(v):t(r)))}),q(()=>(t(x),s()),()=>{L(U,t(x)?s().bandwidth()/2:0)}),q(()=>(t(k),s()),()=>{L(O,Math.max(...t(k).map(s())))}),vt(),nt();var E=Et();dt(E,15,()=>t(k),(p,V)=>K(p),(p,V,Z)=>{var Y=Pt();const H=y(()=>s()(K(V)));var I=D(Y);et(I,()=>z()===!0,ot=>{var J=It();m(J,"right","0px"),B(()=>m(J,"left",`${n(t($))}px`)),b(ot,J)});var ft=S(S(I,!0));et(ft,()=>M()===!0,ot=>{var J=Ot();m(J,"top","0"),B(()=>{m(J,"left",`${n(t($))}px`),m(J,"width",`${n(t(r))}px`)}),b(ot,J)});var tt=S(S(ft,!0));m(tt,"top","0");var _t=D(tt);B(()=>rt(_t,A()(K(V)))),B(()=>{wt(Y,`tick tick-${n(K(Z))} svelte-1jmrx3z`),F(Y,"style",`left:${n(f()[0])}${n(R())};top:${n(t(H)+t(U))}${n(R())};`),m(tt,"text-align",c()==="even"?"right":"left"),m(tt,"width",`${n(t(v))}px`),m(tt,"left",`${n(-t(v)-G()-(c()==="even"?t(r):0))}px`),m(tt,"transform",`translate(${n(l()+(c()==="even"?-3:0))}px, calc(-50% + ${n(g()+(c()==="above"||C()===!0&&t(H)===t(O)?-3:4))}px))`)}),b(p,Y)}),b(Q,E),st()}var Nt=T('<div class="circle svelte-icbw6q"></div>'),Qt=T('<div class="scatter-group"></div>');function fe(Q,e){at(e,!1);const i={};lt(i);const _=()=>o(t(v),"$data",i),s=()=>o($,"$xGet",i),f=()=>o(O,"$xScale",i),x=()=>o(U,"$yGet",i),k=()=>o(W,"$yScale",i),r=it("LayerCake"),v=j(r.data),$=r.xGet,U=r.yGet,O=r.xScale,W=r.yScale;let d=a(e,"r",0,5),P=a(e,"fill",0,"#0cf"),M=a(e,"stroke",0,"#000"),c=a(e,"strokeWidth",0,1);nt();var C=Qt();dt(C,9,_,ut,(z,w,A)=>{var u=Nt();const G=y(()=>s()(K(w))+(f().bandwidth?f().bandwidth()/2:0)),l=y(()=>x()(K(w))+(k().bandwidth?k().bandwidth()/2:0)),g=y(()=>d()*2),h=y(()=>d()*2),R=y(P),X=y(c),E=y(M);B(()=>F(u,"style",`
				left: ${t(G)}%;
				top: ${t(l)}%;
				width: ${t(g)}px;
				height: ${t(h)}px;
				background-color: ${t(R)};
				border: ${t(X)}px solid ${t(E)};
			`)),b(z,u)}),b(Q,C),st()}var Xt=T('<div class="bg svelte-19xh5jy" role="tooltip"></div> <!>',1);function Yt(Q,e){at(e,!1);const i={};lt(i);const _=()=>o(O,"$xGet",i),s=()=>o(W,"$yGet",i),f=()=>o(d,"$width",i),x=()=>o(P,"$height",i),k=()=>o(U,"$data",i),r=j(),v=j(),$=j(),{data:U,xGet:O,yGet:W,width:d,height:P}=it("LayerCake");let M=j(!1),c=j({}),C=j({}),z=a(e,"x",0,"x"),w=a(e,"y",0,"y"),A=a(e,"searchRadius",0,void 0),u=a(e,"dataset",0,void 0);function G(R){L(C,R);const X=`layer${z().toUpperCase()}`,E=`layer${w().toUpperCase()}`,p=R[X]/(z()==="x"?f():x())*100,V=R[E]/(w()==="y"?x():f())*100;L(c,t($).find(p,V,A())||{}),L(M,Object.keys(t(c)).length>0)}q(()=>(N(z()),_(),s()),()=>{L(r,z()==="x"?_():s())}),q(()=>(N(w()),s(),_()),()=>{L(v,w()==="y"?s():_())}),q(()=>(f(),x(),t(r),t(v),N(u()),k()),()=>{L($,Bt().extent([[-1,-1],[f()+1,x()+1]]).x(t(r)).y(t(v)).addAll(u()||k()))}),vt(),nt();var l=Xt(),g=ct(l),h=S(S(g,!0));xt(h,e.children,{get x(){return t(r)(t(c))||0},get y(){return t(v)(t(c))||0},get found(){return t(c)},get visible(){return t(M)},get e(){return t(C)}},null),gt("mousemove",g,G,!1),gt("mouseout",g,()=>L(M,!1),!1),gt("blur",g,()=>L(M,!1),!1),b(Q,l),st()}var Dt=T('<div class="row"><span class="key svelte-16stchf"> </span> </div>'),Ht=T('<div class="line svelte-16stchf"></div> <div class="tooltip svelte-16stchf"><div class="title svelte-16stchf"> </div> <!></div>',1);function xe(Q,e){at(e,!1);const i={};lt(i);const _=()=>o($,"$config",i),s=()=>o(k,"$data",i),f=()=>o(r,"$width",i),x=()=>o(v,"$yScale",i),{data:k,width:r,yScale:v,config:$}=it("LayerCake"),U=Ct(","),O=l=>l.replace(/^\w/,g=>g.toUpperCase());let W=a(e,"formatTitle",0,l=>l),d=a(e,"formatKey",0,l=>O(l)),P=a(e,"formatValue",0,l=>isNaN(+l)?l:U(l)),M=a(e,"offset",8,()=>-20),c=a(e,"dataset",0,void 0);const C=150,z=C/2;function w(l){return Object.keys(l).length===0?[]:Object.keys(l).filter(h=>h!==_().x).map(h=>({key:h,value:l[h]})).sort((h,R)=>R.value-h.value)}nt();var A=ht(),u=ct(A),G=Mt(()=>c()||s());Yt(u,{get dataset(){return t(G)},y:"x",children:(l,g)=>{const h=y(()=>g.x),R=y(()=>g.visible),X=y(()=>g.found);var E=ht();const p=y(()=>w(t(X)));var V=ct(E);et(V,()=>t(R)===!0,Z=>{var Y=Ht(),H=ct(Y),I=S(S(H,!0));const ft=y(()=>C),tt=y(()=>t(R)?"block":"none"),_t=y(()=>x()(t(p)[0].value)),ot=y(M),J=y(()=>Math.min(Math.max(z,t(h)/100*f()),f()-z));B(()=>F(I,"style",`
        width:${t(ft)}px;
        display: ${t(tt)};
        top:calc(${t(_t)}% + ${t(ot)}px);
        left:${t(J)}px;`));var mt=D(I),St=D(mt);B(()=>rt(St,W()(t(X)[_().x])));var Gt=S(S(mt,!0));dt(Gt,1,()=>t(p),ut,(pt,yt,te)=>{var bt=Dt(),kt=D(bt),Lt=D(kt);B(()=>rt(Lt,`${n(d()(K(yt).key))}:`));var jt=S(kt,!0);B(()=>rt(jt,` ${n(P()(K(yt).value))}`)),b(pt,bt)}),B(()=>F(H,"style",`left:${n(t(h)/100*f())}px;`)),b(Z,Y)}),b(l,E)}}),b(Q,A),st()}var Ft=T('<div class="circle svelte-1j3utxh"></div>'),Jt=T('<div class="dot-row"><div class="line svelte-1j3utxh"></div> <!></div>'),Zt=T('<div class="dot-plot"></div>');function ue(Q,e){at(e,!1);const i={};lt(i);const _=()=>o(P,"$yScale",i),s=()=>o(t(U),"$data",i),f=()=>o(W,"$yGet",i),x=()=>o(O,"$xGet",i),k=()=>o(d,"$zScale",i),r=()=>o(M,"$config",i),v=j(),$=it("LayerCake"),U=j($.data),O=$.xGet,W=$.yGet,d=$.zScale,P=$.yScale,M=$.config;let c=a(e,"r",0,5);q(()=>_(),()=>{L(v,_().bandwidth()/2)}),vt(),nt();var C=Zt();dt(C,9,s,ut,(z,w,A)=>{var u=Jt();const G=y(()=>f()(K(w))),l=y(()=>x()(K(w)));var g=D(u);const h=y(()=>Math.min(...t(l))),R=y(()=>t(G)+t(v)),X=y(()=>100-Math.max(...t(l)));B(()=>F(g,"style",`
					left: ${t(h)}%;
					top: ${t(R)}%;
					right: ${t(X)}%;
				`));var E=S(S(g,!0));dt(E,1,()=>t(l),ut,(p,V,Z)=>{var Y=Ft();B(()=>F(Y,"style",`
						left: ${n(K(V))}%;
						top: ${n(t(G)+t(v))}%;
						width: ${n(c()*2)}px;
						height: ${n(c()*2)}px;
						background: ${n(k()(r().x[K(Z)]))};
					`)),b(p,Y)}),b(z,u)}),b(Q,C),st()}export{oe as A,ue as C,Yt as Q,de as S,ve as a,fe as b,xe as c};
