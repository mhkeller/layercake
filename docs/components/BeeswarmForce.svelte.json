{"main":{"slug":"BeeswarmForce.svelte","contents":"<!--\n  @component\n  Generates an SVG Beeswarm chart using a [d3-force simulation](https://github.com/d3/d3-force).\n -->\n<script>\n  import { getContext } from 'svelte';\n  import { forceSimulation, forceX, forceY, forceCollide } from 'd3-force';\n\n  const { data, xGet, height, zGet } = getContext('LayerCake');\n\n  const nodes = $data.map(d => ({ ...d }));\n\n  /** @type {Number} [r=4] - The circle radius size in pixels. */\n  export let r = 4;\n\n  /** @type {Number} [strokeWidth=1] - The circle's stroke width in pixels. */\n  export let strokeWidth = 1;\n\n  /** @type {String} [stroke='#fff'] - The circle's stroke color. */\n  export let stroke = '#fff';\n\n  /** @type {Number} [xStrength=0.95] - The value passed into the `.strength` method on `forceX`. See [the documentation](https://github.com/d3/d3-force#x_strength). */\n  export let xStrength = 0.95;\n\n  /** @type {Number} [yStrength=0.075] - The value passed into the `.strength` method on `forceY`. See [the documentation](https://github.com/d3/d3-force#y_strength). */\n  export let yStrength = 0.075;\n\n  /** @type {Function|undefined} [getTitle] — An accessor function to get the field on the data element to display as a hover label using a `<title>` tag. */\n  export let getTitle = undefined;\n\n  $: simulation = forceSimulation(nodes)\n    .force(\n      'x',\n      forceX()\n        .x(d => $xGet(d))\n        .strength(xStrength)\n    )\n    .force(\n      'y',\n      forceY()\n        .y($height / 2)\n        .strength(yStrength)\n    )\n    .force('collide', forceCollide(r))\n    .stop();\n\n  $: {\n    for (\n      let i = 0,\n        n = Math.ceil(Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay()));\n      i < n;\n      ++i\n    ) {\n      simulation.tick();\n    }\n  }\n</script>\n\n<g class=\"bee-group\">\n  {#each simulation.nodes() as node}\n    <circle fill={$zGet(node)} {stroke} stroke-width={strokeWidth} cx={node.x} cy={node.y} {r}>\n      {#if getTitle}\n        <title>{getTitle(node)}</title>\n      {/if}\n    </circle>\n  {/each}\n</g>"},"dek":"","usedIn":[{"group":"Regular","matches":["/example/BeeswarmForce"]},{"group":"SSR","matches":[]}],"hasjsDoctable":true,"jsdocParsed":{"description":"","tags":[{"title":"param","description":"The circle radius size in pixels.","type":{"type":"OptionalType","expression":{"type":"NameExpression","name":"Number"}},"name":"r","default":"4"},{"title":"param","description":"The circle's stroke width in pixels.","type":{"type":"OptionalType","expression":{"type":"NameExpression","name":"Number"}},"name":"strokeWidth","default":"1"},{"title":"param","description":"The circle's stroke color.","type":{"type":"OptionalType","expression":{"type":"NameExpression","name":"String"}},"name":"stroke","default":"'#fff'"},{"title":"param","description":"The value passed into the `.strength` method on `forceX`. See [the documentation](https://github.com/d3/d3-force#x_strength).","type":{"type":"OptionalType","expression":{"type":"NameExpression","name":"Number"}},"name":"xStrength","default":"0.95"},{"title":"param","description":"The value passed into the `.strength` method on `forceY`. See [the documentation](https://github.com/d3/d3-force#y_strength).","type":{"type":"OptionalType","expression":{"type":"NameExpression","name":"Number"}},"name":"yStrength","default":"0.075"},{"title":"param","description":"— An accessor function to get the field on the data element to display as a hover label using a `<title>` tag.","type":{"type":"OptionalType","expression":{"type":"UnionType","elements":[{"type":"NameExpression","name":"Function"},{"type":"UndefinedLiteral"}]}},"name":"getTitle"}]},"componentDescription":"Generates an SVG Beeswarm chart using a [d3-force simulation](https://github.com/d3/d3-force).","modules":[]}