<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="Layer Cake" name=description> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#ff3e00 name=theme-color> <link href=/layercake-logo-100.png rel=icon type=image/png> <meta content=https://layercake.graphics property=og:site_name> <meta content=article property=og:type> <meta content=summary_large_image name=twitter:card> <meta content=https://layercake.graphics/layercake-logo-1200.png property=og:image> <meta content="A framework for mostly-reusable graphics with svelte" property=og:description> <meta content="A framework for mostly-reusable graphics with svelte" name=description> <meta content="layercake, graphics, svelte, graphics framework, svelte graphics framework, data viz, data visualization, reusable, mostly-reusable" name=keywords> <meta content=https://layercake.graphics property=og:url> <link href=https://layercake.graphics/favicon.png rel="shortcut icon" type=image/png> <meta content=https://layercake.graphics name=twitter:site> <meta content=https://layercake.graphics/layercake-logo-1200.png name=twitter:image> <title>Brush</title> <link href=/_app/assets/pages/__layout.svelte-ee5e16f5.css rel=stylesheet> <link href=/_app/assets/GuideContents-1848e154.css rel=stylesheet> <link href=/_app/assets/_examples-998eb4dc.css rel=stylesheet> <link href=/_app/assets/Brush.html-f94bf1b6.css rel=stylesheet> <link href=/_app/assets/dots-46cc133f.css rel=stylesheet> <link href=/_app/assets/_examples_ssr-92b79465.css rel=stylesheet> <link href=/_app/assets/ClevelandDotPlot.percent-range.html-1e347309.css rel=stylesheet> <link href=/_app/assets/pages/example-ssr/_slug_.svelte-b2e27e46.css rel=stylesheet> <link href=/_app/assets/cleanTitle-6421f29e.css rel=stylesheet> <link href=/_app/start-7c5db4c1.js rel=modulepreload> <link href=/_app/chunks/vendor-2ea78382.js rel=modulepreload> <link href=/_app/chunks/singletons-4a680913.js rel=modulepreload> <link href=/_app/pages/__layout.svelte-9939956b.js rel=modulepreload> <link href=/_app/chunks/GuideContents-598f36c6.js rel=modulepreload> <link href=/_app/chunks/_examples-65527de1.js rel=modulepreload> <link href=/_app/chunks/Brush.html-f1e0b39f.js rel=modulepreload> <link href=/_app/chunks/dots-88b70d18.js rel=modulepreload> <link href=/_app/chunks/pointsFour-ad3813a0.js rel=modulepreload> <link href=/_app/chunks/_examples_ssr-d095a9fa.js rel=modulepreload> <link href=/_app/chunks/ClevelandDotPlot.percent-range.html-317812a4.js rel=modulepreload> <link href=/_app/pages/example-ssr/_slug_.svelte-796f82b9.js rel=modulepreload> <link href=/_app/chunks/cleanTitle-accdb164.js rel=modulepreload> <link href=/_app/chunks/downloadBlob-f865e357.js rel=modulepreload> <link href=/_app/chunks/hljsDefineSvelte-bd0b92b8.js rel=modulepreload> <script type=module> import { start } from "/_app/start-7c5db4c1.js";
				start({
					target: document.querySelector("body"),
					paths: {"base":"","assets":""},
					session: {},
					route: true,
					spa: false,
					trailing_slash: "never",
					hydrate: {
						status: 200,
						error: null,
						nodes: [
							import("/_app/pages/__layout.svelte-9939956b.js"),
						import("/_app/pages/example-ssr/_slug_.svelte-796f82b9.js")
						],
						url: new URL("http://prerender/example-ssr/Brush"),
						params: {slug:"Brush"}
					}
				}); </script> </head> <body> <div id=svelte> <div class="svelte-6iinyn closed mousecatcher"></div> <div class="svelte-6iinyn container"><span class="svelte-6iinyn menu-closed menu-link">Menu</span> <a class="svelte-6iinyn logo" href=/ sveltekit:prefetch>Layer Cake</a></div> <ul class="svelte-6iinyn dropdown"><li class=svelte-6iinyn> <select class=svelte-6iinyn><option value=/ >All<option value="" class="svelte-6iinyn header" disabled><option value=Client-side class="svelte-6iinyn header" disabled>Client-side<option value=/example/Bar>Bar<option value=/example/Beeswarm>Beeswarm<option value=/example/BeeswarmForce>Beeswarm, force layout<option value=/example/Brush>Brush<option value=/example/Calendar>Calendar<option value=/example/CirclePack>Circle pack<option value=/example/CirclePackForce>Circle pack, force layout<option value=/example/ClevelandDotPlot>Cleveland dot plot<option value=/example/Column>Column annotated<option value=/example/Histogram>Histogram<option value=/example/Line>Line + area<option value=/example/MapSvg>Map<option value=/example/MapLayered>Multilayer map<option value=/example/MultiLine>Multiline<option value=/example/CirclePackNested>Nested circle pack<option value=/example/Radar>Radar chart<option value=/example/Sankey>Sankey<option value=/example/Scatter>Scatter<option value=/example/SmallMultiples>Small multiples<option value=/example/AreaStacked>Stacked area<option value=/example/BarStacked>Stacked bar<option value=/example/ColumnStacked>Stacked column<option value=/example/SyncedBrush>Synced brush<option value=/example/Timeplot>Time of day plot<option value=/example/ScatterWebgl>WebGL Scatter<option value="" class="svelte-6iinyn header" disabled><option value=Server-side class="svelte-6iinyn header" disabled>Server-side<option value=/example-ssr/Bar>Bar<option value=/example-ssr/Brush>Brush<option value=/example-ssr/Calendar>Calendar<option value=/example-ssr/ClevelandDotPlot>Cleveland dot plot<option value=/example-ssr/Column>Column annotated<option value=/example-ssr/Histogram>Histogram<option value=/example-ssr/Line>Line + area<option value=/example-ssr/MapSvg>Map<option value=/example-ssr/MapLayered>Multilayer map<option value=/example-ssr/MultiLine>Multiline<option value=/example-ssr/Scatter>Scatter<option value=/example-ssr/SmallMultiples>Small multiples<option value=/example-ssr/AreaStacked>Stacked area<option value=/example-ssr/BarStacked>Stacked bar<option value=/example-ssr/ColumnStacked>Stacked column<option value=/example-ssr/SyncedBrush>Synced brush<option value=/example-ssr/Timeplot>Time of day plot<option value=/example-ssr/ScatterWebgl>WebGL Scatter</select></ul> <nav class="svelte-6iinyn closed"><ul class="svelte-6iinyn primary"><li class=svelte-6iinyn><a class=svelte-6iinyn href=/components sveltekit:prefetch><span class="svelte-6iinyn wide-name">Component gallery</span><span class="svelte-6iinyn short-name">Components</span></a></li> <li class=svelte-6iinyn><a class=svelte-6iinyn href=/guide sveltekit:prefetch>Guide</a></li> <li class=svelte-6iinyn><a class=svelte-6iinyn href=https://github.com/mhkeller/layercake id=github-link></a></ul> <div class="svelte-6iinyn secondary"><ul class="svelte-7hddv0 guide-toc"><li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#introduction>Introduction</a> <a class="svelte-7hddv0 subsection" href=/guide#what-is-layer-cake>What is Layer Cake?</a><a class="svelte-7hddv0 subsection" href=/guide#key-concepts>Key Concepts</a><a class="svelte-7hddv0 subsection" href=/guide#getting-started>Getting started</a><a class="svelte-7hddv0 subsection" href=/guide#using-layout-components>Using layout components</a><a class="svelte-7hddv0 subsection" href=/guide#layer-components>Layer components</a><a class="svelte-7hddv0 subsection" href=/guide#data-less-cakes>Data-less cakes</a><a class="svelte-7hddv0 subsection" href=/guide#server-side-rendering>Server-side rendering</a> <li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#troubleshooting>Troubleshooting</a> <a class="svelte-7hddv0 subsection" href=/guide#the-chart-is-blank>The chart is blank</a><a class="svelte-7hddv0 subsection" href=/guide#the-chart-is-a-very-small-square>The chart is a very small square</a><a class="svelte-7hddv0 subsection" href=/guide#the-library-isn39t-building-properly>The library isn't building properly</a> <li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#layercake-props>LayerCake props</a> <a class="svelte-7hddv0 subsection" href=/guide#data>data</a><a class="svelte-7hddv0 subsection" href=/guide#x>x</a><a class="svelte-7hddv0 subsection" href=/guide#y>y</a><a class="svelte-7hddv0 subsection" href=/guide#z>z</a><a class="svelte-7hddv0 subsection" href=/guide#r>r</a><a class="svelte-7hddv0 subsection" href=/guide#padding>padding</a><a class="svelte-7hddv0 subsection" href=/guide#xscale>xScale</a><a class="svelte-7hddv0 subsection" href=/guide#yscale>yScale</a><a class="svelte-7hddv0 subsection" href=/guide#zscale>zScale</a><a class="svelte-7hddv0 subsection" href=/guide#rscale>rScale</a><a class="svelte-7hddv0 subsection" href=/guide#xdomain>xDomain</a><a class="svelte-7hddv0 subsection" href=/guide#ydomain>yDomain</a><a class="svelte-7hddv0 subsection" href=/guide#zdomain>zDomain</a><a class="svelte-7hddv0 subsection" href=/guide#rdomain>rDomain</a><a class="svelte-7hddv0 subsection" href=/guide#xreverse>xReverse</a><a class="svelte-7hddv0 subsection" href=/guide#yreverse>yReverse</a><a class="svelte-7hddv0 subsection" href=/guide#zreverse>zReverse</a><a class="svelte-7hddv0 subsection" href=/guide#rreverse>rReverse</a><a class="svelte-7hddv0 subsection" href=/guide#xrange>xRange</a><a class="svelte-7hddv0 subsection" href=/guide#yrange>yRange</a><a class="svelte-7hddv0 subsection" href=/guide#zrange>zRange</a><a class="svelte-7hddv0 subsection" href=/guide#rrange>rRange</a><a class="svelte-7hddv0 subsection" href=/guide#xpadding>xPadding</a><a class="svelte-7hddv0 subsection" href=/guide#ypadding>yPadding</a><a class="svelte-7hddv0 subsection" href=/guide#zpadding>zPadding</a><a class="svelte-7hddv0 subsection" href=/guide#rpadding>rPadding</a><a class="svelte-7hddv0 subsection" href=/guide#xnice>xNice</a><a class="svelte-7hddv0 subsection" href=/guide#ynice>yNice</a><a class="svelte-7hddv0 subsection" href=/guide#znice>zNice</a><a class="svelte-7hddv0 subsection" href=/guide#rnice>rNice</a><a class="svelte-7hddv0 subsection" href=/guide#extents>extents</a><a class="svelte-7hddv0 subsection" href=/guide#flatdata>flatData</a><a class="svelte-7hddv0 subsection" href=/guide#ssr>ssr</a><a class="svelte-7hddv0 subsection" href=/guide#percentrange>percentRange</a><a class="svelte-7hddv0 subsection" href=/guide#position>position</a><a class="svelte-7hddv0 subsection" href=/guide#custom>custom</a> <li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#computed-context-values>Computed context values</a> <a class="svelte-7hddv0 subsection" href=/guide#activegetters>activeGetters</a><a class="svelte-7hddv0 subsection" href=/guide#aspectratio>aspectRatio</a><a class="svelte-7hddv0 subsection" href=/guide#box>box</a><a class="svelte-7hddv0 subsection" href=/guide#config>config</a><a class="svelte-7hddv0 subsection" href=/guide#containerwidth>containerWidth</a><a class="svelte-7hddv0 subsection" href=/guide#containerheight>containerHeight</a><a class="svelte-7hddv0 subsection" href=/guide#extents-1>extents</a><a class="svelte-7hddv0 subsection" href=/guide#width>width</a><a class="svelte-7hddv0 subsection" href=/guide#height>height</a><a class="svelte-7hddv0 subsection" href=/guide#x-1>x</a><a class="svelte-7hddv0 subsection" href=/guide#y-1>y</a><a class="svelte-7hddv0 subsection" href=/guide#z-1>z</a><a class="svelte-7hddv0 subsection" href=/guide#r-1>r</a><a class="svelte-7hddv0 subsection" href=/guide#xdomain-1>xDomain</a><a class="svelte-7hddv0 subsection" href=/guide#ydomain-1>yDomain</a><a class="svelte-7hddv0 subsection" href=/guide#zdomain-1>zDomain</a><a class="svelte-7hddv0 subsection" href=/guide#rdomain-1>rDomain</a><a class="svelte-7hddv0 subsection" href=/guide#xrange-1>xRange</a><a class="svelte-7hddv0 subsection" href=/guide#yrange-1>yRange</a><a class="svelte-7hddv0 subsection" href=/guide#zrange-1>zRange</a><a class="svelte-7hddv0 subsection" href=/guide#rrange-1>rRange</a><a class="svelte-7hddv0 subsection" href=/guide#xget>xGet(...)</a><a class="svelte-7hddv0 subsection" href=/guide#yget>yGet(...)</a><a class="svelte-7hddv0 subsection" href=/guide#zget>zGet(...)</a><a class="svelte-7hddv0 subsection" href=/guide#rget>rGet(...)</a><a class="svelte-7hddv0 subsection" href=/guide#xscale-1>xScale(...)</a><a class="svelte-7hddv0 subsection" href=/guide#yscale-1>yScale(...)</a><a class="svelte-7hddv0 subsection" href=/guide#zscale-1>zScale(...)</a><a class="svelte-7hddv0 subsection" href=/guide#rscale-1>rScale(...)</a> <li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#layout-components>Layout components</a> <a class="svelte-7hddv0 subsection" href=/guide#html>Html</a><a class="svelte-7hddv0 subsection" href=/guide#svg>Svg</a><a class="svelte-7hddv0 subsection" href=/guide#scaledsvg>ScaledSvg</a><a class="svelte-7hddv0 subsection" href=/guide#canvas>Canvas</a><a class="svelte-7hddv0 subsection" href=/guide#webgl>WebGL</a> <li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#layout-component-props>Layout component props</a> <a class="svelte-7hddv0 subsection" href=/guide#zindex>zIndex</a><a class="svelte-7hddv0 subsection" href=/guide#pointerevents>pointerEvents</a><a class="svelte-7hddv0 subsection" href=/guide#viewbox>viewBox</a><a class="svelte-7hddv0 subsection" href=/guide#fixedaspectratio>fixedAspectRatio</a><a class="svelte-7hddv0 subsection" href=/guide#contextattributes>contextAttributes</a> <li class=svelte-7hddv0><a class="svelte-7hddv0 section" href=/guide#helper-functions>Helper functions</a> <a class="svelte-7hddv0 subsection" href=/guide#flatten>flatten(...)</a><a class="svelte-7hddv0 subsection" href=/guide#scalecanvas>scaleCanvas(...)</a><a class="svelte-7hddv0 subsection" href=/guide#calcextents>calcExtents(...)</a><a class="svelte-7hddv0 subsection" href=/guide#uniques>uniques(...)</a><a class="svelte-7hddv0 subsection" href=/guide#raise>raise(...)</a> </ul></div></nav> <main> <div class="svelte-1b77smd main" data-label=Server-side><h1>Brush<a class="svelte-1b77smd edit-repl" href="https://svelte.dev/repl/7b692f97938f4bc2a79d62d5ccdbb02d?version=3.46.2" rel=nofollow target=_blank>Edit</a></h1> <div class="svelte-1b77smd chart-hero" data-slug=brush><div class="svelte-gzqk0p chart-container"> <div class="layercake-container svelte-vhzpsp" style=position:relative> <div class="layercake-layout-html svelte-1bu60uu" style=top:0;right:10px;bottom:20px;left:25px> <div class="svelte-fgaa75 axis x-axis"><div class="svelte-fgaa75 gridline" style=left:2.7027027027027026%;top:0;bottom:0></div> <div class="svelte-fgaa75 tick tick-0" style=left:2.7027027027027026%;top:100%><div class="svelte-fgaa75 text" style=top:7px>1980</div> </div><div class="svelte-fgaa75 gridline" style=left:29.72972972972973%;top:0;bottom:0></div> <div class="svelte-fgaa75 tick tick-1" style=left:29.72972972972973%;top:100%><div class="svelte-fgaa75 text" style=top:7px>1990</div> </div><div class="svelte-fgaa75 gridline" style=left:56.75675675675676%;top:0;bottom:0></div> <div class="svelte-fgaa75 tick tick-2" style=left:56.75675675675676%;top:100%><div class="svelte-fgaa75 text" style=top:7px>2000</div> </div><div class="svelte-fgaa75 gridline" style=left:83.78378378378379%;top:0;bottom:0></div> <div class="svelte-fgaa75 tick tick-3" style=left:83.78378378378379%;top:100%><div class="svelte-fgaa75 text" style=top:7px>2010</div> </div> </div> <div class="svelte-1e3rg42 axis y-axis" style=transform:translate(-25px,0)><div class="svelte-1e3rg42 tick tick-0" style=top:100%;left:0><div class="svelte-1e3rg42 gridline" style=top:0;left:0;right:-35px></div> <div class="svelte-1e3rg42 text" style=top:-1px;left:0;transform:translate(0,-100%)>0</div> </div><div class="svelte-1e3rg42 tick tick-1" style=top:74.58703939008895%;left:0><div class="svelte-1e3rg42 gridline" style=top:0;left:0;right:-35px></div> <div class="svelte-1e3rg42 text" style=top:-1px;left:0;transform:translate(0,-100%)>2</div> </div><div class="svelte-1e3rg42 tick tick-2" style=top:49.17407878017789%;left:0><div class="svelte-1e3rg42 gridline" style=top:0;left:0;right:-35px></div> <div class="svelte-1e3rg42 text" style=top:-1px;left:0;transform:translate(0,-100%)>4</div> </div><div class="svelte-1e3rg42 tick tick-3" style=top:23.761118170266837%;left:0><div class="svelte-1e3rg42 gridline" style=top:0;left:0;right:-35px></div> <div class="svelte-1e3rg42 text" style=top:-1px;left:0;transform:translate(0,-100%)>6</div> </div> </div> </div> <svg class=svelte-6sm8ei preserveAspectRatio=none style="top:0;right:0;bottom:0;left:25px;width:calc(100% - 35px);height:calc(100% - 20px)" viewBox="0 0 100 100"><defs></defs> <path class="path-line svelte-1a99x5h" d=M0,8.640406607369755L2.7027027027027026,0.5082592121982255L5.405405405405405,8.005082592121981L8.108108108108109,5.463786531130877L10.81081081081081,4.574332909783996L13.513513513513514,9.783989834815765L16.216216216216218,12.198221092757311L18.91891891891892,4.3202033036848775L21.62162162162162,5.08259212198221L24.324324324324326,4.955527318932651L27.027027027027028,10.673443456162646L29.72972972972973,20.838627700127066L32.432432432432435,16.899618805590855L35.13513513513514,4.19313850063533L37.83783783783784,17.40787801778907L40.54054054054054,8.767471410419315L43.24324324324324,22.236340533672173L45.94594594594595,0L48.64864864864865,14.485387547649298L51.35135135135135,16.772554002541295L54.054054054054056,20.838627700127066L56.75675675675676,19.822109275730625L59.45945945945946,14.35832274459975L62.16216216216216,24.396442185514612L64.86486486486487,22.109275730622624L67.56756756756756,23.25285895806861L70.27027027027027,29.351969504447272L72.97297297297297,24.904701397712834L75.67567567567568,45.489199491740784L78.37837837837837,40.02541296060992L81.08108108108108,31.63913595933927L83.78378378378379,37.484116899618805L86.48648648648648,41.42312579415501L89.1891891891892,54.00254129606099L91.8918918918919,32.02033036848794L94.5945945945946,32.90978398983482L97.2972972972973,41.16899618805591L100,40.02541296060992 stroke=#00e047></path> <path class=path-area d=M0,8.640406607369755L2.7027027027027026,0.5082592121982255L5.405405405405405,8.005082592121981L8.108108108108109,5.463786531130877L10.81081081081081,4.574332909783996L13.513513513513514,9.783989834815765L16.216216216216218,12.198221092757311L18.91891891891892,4.3202033036848775L21.62162162162162,5.08259212198221L24.324324324324326,4.955527318932651L27.027027027027028,10.673443456162646L29.72972972972973,20.838627700127066L32.432432432432435,16.899618805590855L35.13513513513514,4.19313850063533L37.83783783783784,17.40787801778907L40.54054054054054,8.767471410419315L43.24324324324324,22.236340533672173L45.94594594594595,0L48.64864864864865,14.485387547649298L51.35135135135135,16.772554002541295L54.054054054054056,20.838627700127066L56.75675675675676,19.822109275730625L59.45945945945946,14.35832274459975L62.16216216216216,24.396442185514612L64.86486486486487,22.109275730622624L67.56756756756756,23.25285895806861L70.27027027027027,29.351969504447272L72.97297297297297,24.904701397712834L75.67567567567568,45.489199491740784L78.37837837837837,40.02541296060992L81.08108108108108,31.63913595933927L83.78378378378379,37.484116899618805L86.48648648648648,41.42312579415501L89.1891891891892,54.00254129606099L91.8918918918919,32.02033036848794L94.5945945945946,32.90978398983482L97.2972972972973,41.16899618805591L100,40.02541296060992L100,100L0,100Z fill=#00e04710></path></svg></div></div> <div class="svelte-gzqk0p brush-container"> <div class="layercake-container svelte-vhzpsp" style=position:relative> <svg class=svelte-6sm8ei preserveAspectRatio=none style="top:5px;right:0;bottom:0;left:0;width:calc(100% - 0px);height:calc(100% - 5px)" viewBox="0 0 100 100"><defs></defs> <path class="path-line svelte-1a99x5h" d=M0,8.640406607369755L2.7027027027027026,0.5082592121982255L5.405405405405405,8.005082592121981L8.108108108108109,5.463786531130877L10.81081081081081,4.574332909783996L13.513513513513514,9.783989834815765L16.216216216216218,12.198221092757311L18.91891891891892,4.3202033036848775L21.62162162162162,5.08259212198221L24.324324324324326,4.955527318932651L27.027027027027028,10.673443456162646L29.72972972972973,20.838627700127066L32.432432432432435,16.899618805590855L35.13513513513514,4.19313850063533L37.83783783783784,17.40787801778907L40.54054054054054,8.767471410419315L43.24324324324324,22.236340533672173L45.94594594594595,0L48.64864864864865,14.485387547649298L51.35135135135135,16.772554002541295L54.054054054054056,20.838627700127066L56.75675675675676,19.822109275730625L59.45945945945946,14.35832274459975L62.16216216216216,24.396442185514612L64.86486486486487,22.109275730622624L67.56756756756756,23.25285895806861L70.27027027027027,29.351969504447272L72.97297297297297,24.904701397712834L75.67567567567568,45.489199491740784L78.37837837837837,40.02541296060992L81.08108108108108,31.63913595933927L83.78378378378379,37.484116899618805L86.48648648648648,41.42312579415501L89.1891891891892,54.00254129606099L91.8918918918919,32.02033036848794L94.5945945945946,32.90978398983482L97.2972972972973,41.16899618805591L100,40.02541296060992 stroke=#00e047></path> <path class=path-area d=M0,8.640406607369755L2.7027027027027026,0.5082592121982255L5.405405405405405,8.005082592121981L8.108108108108109,5.463786531130877L10.81081081081081,4.574332909783996L13.513513513513514,9.783989834815765L16.216216216216218,12.198221092757311L18.91891891891892,4.3202033036848775L21.62162162162162,5.08259212198221L24.324324324324326,4.955527318932651L27.027027027027028,10.673443456162646L29.72972972972973,20.838627700127066L32.432432432432435,16.899618805590855L35.13513513513514,4.19313850063533L37.83783783783784,17.40787801778907L40.54054054054054,8.767471410419315L43.24324324324324,22.236340533672173L45.94594594594595,0L48.64864864864865,14.485387547649298L51.35135135135135,16.772554002541295L54.054054054054056,20.838627700127066L56.75675675675676,19.822109275730625L59.45945945945946,14.35832274459975L62.16216216216216,24.396442185514612L64.86486486486487,22.109275730622624L67.56756756756756,23.25285895806861L70.27027027027027,29.351969504447272L72.97297297297297,24.904701397712834L75.67567567567568,45.489199491740784L78.37837837837837,40.02541296060992L81.08108108108108,31.63913595933927L83.78378378378379,37.484116899618805L86.48648648648648,41.42312579415501L89.1891891891892,54.00254129606099L91.8918918918919,32.02033036848794L94.5945945945946,32.90978398983482L97.2972972972973,41.16899618805591L100,40.02541296060992L100,100L0,100Z fill=#00e04710></path></svg> <div class="layercake-layout-html svelte-1bu60uu" style=top:5px;right:0;bottom:0;left:0> <div class="brush-outer svelte-1m1nhvc"> </div> </div></div></div></div> <div class="svelte-1b77smd download"><button class="icon svelte-1gef78k" style=background-image:url(/icons/download.svg) title="download zip file">Download      </button></div> <div class=svelte-1b77smd id=pages><ul class=svelte-1b77smd id=page-nav><li class="svelte-1b77smd tab active">index.svelte<li class="svelte-1b77smd tab">./components/Line.svelte<li class="svelte-1b77smd tab">./components/Area.svelte<li class="svelte-1b77smd tab">./components/AxisX.html.svelte<li class="svelte-1b77smd tab">./components/AxisY.html.svelte<li class="svelte-1b77smd tab">./components/Brush.html.svelte<li class="svelte-1b77smd tab">./data/points.csv</ul> <div class=svelte-1b77smd id=contents-container><div class="svelte-1b77smd copy"></div> <div class=contents style=display:block><pre class=svelte-1b77smd><span class=language-xml><span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-keyword>import</span> { <span class="hljs-title class_">LayerCake</span>, <span class="hljs-title class_">ScaledSvg</span>, <span class="hljs-title class_">Html</span> } <span class=hljs-keyword>from</span> <span class=hljs-string>'layercake'</span>;

  <span class=hljs-keyword>import</span> <span class="hljs-title class_">Line</span> <span class=hljs-keyword>from</span> <span class=hljs-string>'./components/Line.svelte'</span>;
  <span class=hljs-keyword>import</span> <span class="hljs-title class_">Area</span> <span class=hljs-keyword>from</span> <span class=hljs-string>'./components/Area.svelte'</span>;
  <span class=hljs-keyword>import</span> <span class="hljs-title class_">AxisX</span> <span class=hljs-keyword>from</span> <span class=hljs-string>'./components/AxisX.html.svelte'</span>;
  <span class=hljs-keyword>import</span> <span class="hljs-title class_">AxisY</span> <span class=hljs-keyword>from</span> <span class=hljs-string>'./components/AxisY.html.svelte'</span>;
  <span class=hljs-keyword>import</span> <span class="hljs-title class_">Brush</span> <span class=hljs-keyword>from</span> <span class=hljs-string>'./components/Brush.html.svelte'</span>;

  <span class=hljs-comment>// This example loads csv data as json using @rollup/plugin-dsv</span>
  <span class=hljs-keyword>import</span> data <span class=hljs-keyword>from</span> <span class=hljs-string>'./data/points.csv'</span>;

  <span class=hljs-keyword>let</span> brushExtents = [<span class=hljs-literal>null</span>, <span class=hljs-literal>null</span>];

  <span class=hljs-keyword>const</span> xKey = <span class=hljs-string>'myX'</span>;
  <span class=hljs-keyword>const</span> yKey = <span class=hljs-string>'myY'</span>;

  data.<span class="hljs-title function_">forEach</span>(<span class=hljs-function><span class=hljs-params>d</span> =></span> {
    d[yKey] = +d[yKey];
  });

  <span class=hljs-keyword>let</span> brushedData;
</span><span class=hljs-keyword>  $: </span><span class=language-javascript>{
    brushedData = data.<span class="hljs-title function_">slice</span>((brushExtents[<span class=hljs-number>0</span>] || <span class=hljs-number>0</span>) * data.<span class=hljs-property>length</span>, (brushExtents[<span class=hljs-number>1</span>] || <span class=hljs-number>1</span>) * data.<span class=hljs-property>length</span>);
    <span class=hljs-keyword>if</span> (brushedData.<span class=hljs-property>length</span> &lt; <span class=hljs-number>2</span>) {
      brushedData = data.<span class="hljs-title function_">slice</span>(brushExtents[<span class=hljs-number>0</span>] * data.<span class=hljs-property>length</span>, brushExtents[<span class=hljs-number>0</span>] * data.<span class=hljs-property>length</span> + <span class=hljs-number>2</span>)
    }
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span></span><span class=language-css>
  <span class=hljs-comment>/*
    The wrapper div needs to have an explicit width and height in CSS.
    It can also be a flexbox child or CSS grid element.
    The point being it needs dimensions since the &lt;LayerCake> element will
    expand to fill it.
  */</span>
  <span class=hljs-selector-class>.chart-container</span> {
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>80%</span>;
  }
  <span class=hljs-selector-class>.brush-container</span> {
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>20%</span>;
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"chart-container"</span>></span>
  <span class=hljs-tag>&lt;<span class=hljs-name>LayerCake</span>
    <span class=hljs-attr>ssr</span>=</span></span><span class=language-javascript>{<span class=hljs-literal>true</span>}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>percentRange</span>=</span></span><span class=language-javascript>{<span class=hljs-literal>true</span>}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>padding</span>=</span></span><span class=language-javascript>{{ <span class=hljs-attr>right</span>: <span class=hljs-number>10</span>, <span class=hljs-attr>bottom</span>: <span class=hljs-number>20</span>, <span class=hljs-attr>left</span>: <span class=hljs-number>25</span> }}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>x</span>=</span></span><span class=language-javascript>{xKey}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>y</span>=</span></span><span class=language-javascript>{yKey}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>yDomain</span>=</span></span><span class=language-javascript>{[<span class=hljs-number>0</span>, <span class=hljs-literal>null</span>]}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>data</span>=</span></span><span class=language-javascript>{brushedData}</span><span class=language-xml><span class=hljs-tag>
  ></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>Html</span>></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>AxisX</span>
        <span class=hljs-attr>ticks</span>=</span></span><span class=language-javascript>{<span class=hljs-function><span class=hljs-params>ticks</span> =></span> {
          <span class=hljs-keyword>const</span> filtered = ticks.<span class="hljs-title function_">filter</span>(<span class=hljs-function><span class=hljs-params>t</span> =></span> t % <span class=hljs-number>1</span> === <span class=hljs-number>0</span>);
          <span class=hljs-keyword>if</span> (filtered.<span class=hljs-property>length</span> > <span class=hljs-number>7</span>) {
            <span class=hljs-keyword>return</span> filtered.<span class="hljs-title function_">filter</span>(<span class=hljs-function>(<span class=hljs-params>t, i</span>) =></span> i % <span class=hljs-number>2</span> === <span class=hljs-number>0</span>);
          }
          <span class=hljs-keyword>return</span> filtered;
        }</span><span class=language-xml><span class=hljs-tag>}
      /></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>AxisY</span>
        <span class=hljs-attr>ticks</span>=</span></span><span class=language-javascript>{<span class=hljs-number>4</span>}</span><span class=language-xml><span class=hljs-tag>
      /></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>Html</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>ScaledSvg</span>></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>Line</span>
        <span class=hljs-attr>stroke</span>=<span class=hljs-string>'#00e047'</span>
      /></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>Area</span>
        <span class=hljs-attr>fill</span>=<span class=hljs-string>'#00e04710'</span>
      /></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>ScaledSvg</span>></span>
  <span class=hljs-tag>&lt;/<span class=hljs-name>LayerCake</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-container"</span>></span>
  <span class=hljs-tag>&lt;<span class=hljs-name>LayerCake</span>
    <span class=hljs-attr>ssr</span>=</span></span><span class=language-javascript>{<span class=hljs-literal>true</span>}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>percentRange</span>=</span></span><span class=language-javascript>{<span class=hljs-literal>true</span>}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>padding</span>=</span></span><span class=language-javascript>{{ <span class=hljs-attr>top</span>: <span class=hljs-number>5</span> }}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>x</span>=</span></span><span class=language-javascript>{xKey}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>y</span>=</span></span><span class=language-javascript>{yKey}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>yDomain</span>=</span></span><span class=language-javascript>{[<span class=hljs-number>0</span>, <span class=hljs-literal>null</span>]}</span><span class=language-xml><span class=hljs-tag>
    <span class=hljs-attr>data</span>=</span></span><span class=language-javascript>{data}</span><span class=language-xml><span class=hljs-tag>
  ></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>ScaledSvg</span>></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>Line</span>
        <span class=hljs-attr>stroke</span>=<span class=hljs-string>'#00e047'</span>
      /></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>Area</span>
        <span class=hljs-attr>fill</span>=<span class=hljs-string>'#00e04710'</span>
      /></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>ScaledSvg</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>Html</span>></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>Brush</span> <span class=hljs-attr>bind:min</span>=</span></span><span class=language-javascript>{brushExtents[<span class=hljs-number>0</span>]}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>bind:max</span>=</span></span><span class=language-javascript>{brushExtents[<span class=hljs-number>1</span>]}</span><span class=language-xml><span class=hljs-tag>/></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>Html</span>></span>
  <span class=hljs-tag>&lt;/<span class=hljs-name>LayerCake</span>></span>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span></span></pre> </div><div class=contents style=display:none><pre class=svelte-1b77smd><span class=hljs-comment>&lt;!--
  @component
  Generates an SVG area shape using the `area` function from [d3-shape](https://github.com/d3/d3-shape).
 --></span><span class=language-xml>
<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-keyword>import</span> { getContext } <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>;

  <span class=hljs-keyword>const</span> { data, xGet, yGet } = <span class="hljs-title function_">getContext</span>(<span class=hljs-string>'LayerCake'</span>);

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>String</span>} [stroke='#ab00d6'] – The shape's fill color. This is technically optional because it comes with a default value but you'll likely want to replace it with your own color. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> stroke = <span class=hljs-string>'#ab00d6'</span>;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>path = <span class=hljs-string>'M'</span> + $data
    .<span class="hljs-title function_">map</span>(<span class=hljs-function><span class=hljs-params>d</span> =></span> {
      <span class=hljs-keyword>return</span> $xGet(d) + <span class=hljs-string>','</span> + $yGet(d);
    })
    .<span class="hljs-title function_">join</span>(<span class=hljs-string>'L'</span>);
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>path</span> <span class=hljs-attr>class</span>=<span class=hljs-string>'path-line'</span> <span class=hljs-attr>d</span>=<span class=hljs-string>'</span></span></span><span class=language-javascript>{path}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>'</span> </span></span><span class=language-javascript>{stroke}</span><span class=language-xml><span class=hljs-tag>></span><span class=hljs-tag>&lt;/<span class=hljs-name>path</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span></span><span class=language-css>
  <span class=hljs-selector-class>.path-line</span> {
    fill: none;
    stroke-linejoin: round;
    stroke-linecap: round;
    stroke-<span class=hljs-attribute>width</span>: <span class=hljs-number>2</span>;
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span></span></pre> </div><div class=contents style=display:none><pre class=svelte-1b77smd><span class=hljs-comment>&lt;!--
  @component
  Generates an SVG area shape using the `area` function from [d3-shape](https://github.com/d3/d3-shape).
 --></span><span class=language-xml>
<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-keyword>import</span> { getContext } <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>;

  <span class=hljs-keyword>const</span> { data, xGet, yGet, xScale, yScale, extents } = <span class="hljs-title function_">getContext</span>(<span class=hljs-string>'LayerCake'</span>);

  <span class=hljs-comment>/**  <span class=hljs-doctag>@type</span> {<span class=hljs-type>String</span>} [fill='#ab00d610'] The shape's fill color. This is technically optional because it comes with a default value but you'll likely want to replace it with your own color. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> fill = <span class=hljs-string>'#ab00d610'</span>;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>path = <span class=hljs-string>'M'</span> + $data
    .<span class="hljs-title function_">map</span>(<span class=hljs-function><span class=hljs-params>d</span> =></span> {
      <span class=hljs-keyword>return</span> $xGet(d) + <span class=hljs-string>','</span> + $yGet(d);
    })
    .<span class="hljs-title function_">join</span>(<span class=hljs-string>'L'</span>);

  <span class=hljs-keyword>let</span> area;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>{
    <span class=hljs-keyword>const</span> yRange = $yScale.<span class="hljs-title function_">range</span>();
    area = path + (
      <span class=hljs-string>'L'</span> + $xScale($extents.<span class=hljs-property>x</span> ? $extents.<span class=hljs-property>x</span>[<span class=hljs-number>1</span>] : <span class=hljs-number>0</span>) + <span class=hljs-string>','</span> + yRange[<span class=hljs-number>0</span>] +
      <span class=hljs-string>'L'</span> + $xScale($extents.<span class=hljs-property>x</span> ? $extents.<span class=hljs-property>x</span>[<span class=hljs-number>0</span>] : <span class=hljs-number>0</span>) + <span class=hljs-string>','</span> + yRange[<span class=hljs-number>0</span>] +
      <span class=hljs-string>'Z'</span>
    );
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>path</span> <span class=hljs-attr>class</span>=<span class=hljs-string>'path-area'</span> <span class=hljs-attr>d</span>=<span class=hljs-string>'</span></span></span><span class=language-javascript>{area}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>'</span> </span></span><span class=language-javascript>{fill}</span><span class=language-xml><span class=hljs-tag>></span><span class=hljs-tag>&lt;/<span class=hljs-name>path</span>></span></span></pre> </div><div class=contents style=display:none><pre class=svelte-1b77smd><span class=hljs-comment>&lt;!--
  @component
  Generates an HTML x-axis, useful for server-side rendered charts.  This component is also configured to detect if your x-scale is an ordinal scale. If so, it will place the markers in the middle of the bandwidth.
 --></span><span class=language-xml>
<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-keyword>import</span> { getContext } <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>;

  <span class=hljs-keyword>const</span> { xScale } = <span class="hljs-title function_">getContext</span>(<span class=hljs-string>'LayerCake'</span>);

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [gridlines=true] – Extend lines from the ticks into the chart space. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> gridlines = <span class=hljs-literal>true</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [tickMarks=false] – Show a vertical mark for each tick. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> tickMarks = <span class=hljs-literal>false</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [baseline=false] – Show a solid line at the bottom. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> baseline = <span class=hljs-literal>false</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [snapTicks=false] – Instead of centering the text on the first and the last items, align them to the edges of the chart. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> snapTicks = <span class=hljs-literal>false</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Function</span>} [formatTick=d => d] – A function that passes the current tick value and expects a nicely formatted value in return. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> <span class="hljs-title function_">formatTick</span> = d => d;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number|Array|Function</span>} [ticks] – If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. If nothing, it uses the default ticks supplied by the D3 function. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> ticks = <span class=hljs-literal>undefined</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} [yTick=7] – The distance from the baseline to place each tick value, in pixels. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> yTick = <span class=hljs-number>7</span>;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>isBandwidth = <span class=hljs-keyword>typeof</span> $xScale.<span class=hljs-property>bandwidth</span> === <span class=hljs-string>'function'</span>;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>tickVals = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(ticks) ? ticks :
    isBandwidth ?
      $xScale.<span class="hljs-title function_">domain</span>() :
      <span class=hljs-keyword>typeof</span> ticks === <span class=hljs-string>'function'</span> ?
        <span class="hljs-title function_">ticks</span>($xScale.<span class="hljs-title function_">ticks</span>()) :
          $xScale.<span class="hljs-title function_">ticks</span>(ticks);
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>'axis x-axis'</span> <span class=hljs-attr>class:snapTicks</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>#each</span><span class=language-javascript> tickVals <span class=hljs-keyword>as</span> tick, i}</span><span class=language-xml>
    </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> gridlines !== <span class=hljs-literal>false</span>}</span><span class=language-xml>
      <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"gridline"</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'left:</span></span></span><span class=language-javascript>{$xScale(tick)}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%;top: 0px;bottom: 0;'</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
    </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> tickMarks === <span class=hljs-literal>true</span>}</span><span class=language-xml>
      <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"tick-mark"</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'left:</span></span></span><span class=language-javascript>{$xScale(tick) + (isBandwidth ? $xScale.<span class="hljs-title function_">bandwidth</span>() / <span class=hljs-number>2</span> : <span class=hljs-number>0</span>)}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%;height:6px;bottom: -6px;'</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span>
      <span class=hljs-attr>class</span>=<span class=hljs-string>'tick tick-</span></span></span><span class=language-javascript>{ i }</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>'</span>
      <span class=hljs-attr>style</span>=<span class=hljs-string>'left:</span></span></span><span class=language-javascript>{$xScale(tick) + (isBandwidth ? $xScale.<span class="hljs-title function_">bandwidth</span>() / <span class=hljs-number>2</span> : <span class=hljs-number>0</span>)}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%;top:100%;'</span>></span>
      <span class=hljs-tag>&lt;<span class=hljs-name>div</span>
        <span class=hljs-attr>class</span>=<span class=hljs-string>"text"</span>
        <span class=hljs-attr>style</span>=<span class=hljs-string>'top:</span></span></span><span class=language-javascript>{(yTick)}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;'</span>></span></span><span class=language-javascript>{<span class="hljs-title function_">formatTick</span>(tick)}</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>/each</span><span class=language-javascript>}</span><span class=language-xml>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> baseline === <span class=hljs-literal>true</span>}</span><span class=language-xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"baseline"</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'top: 100%;width: 100%;'</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span></span><span class=language-css>
  <span class=hljs-selector-class>.axis</span>,
  <span class=hljs-selector-class>.tick</span>,
  <span class=hljs-selector-class>.tick-mark</span>,
  <span class=hljs-selector-class>.gridline</span>,
  <span class=hljs-selector-class>.baseline</span> {
    <span class=hljs-attribute>position</span>: absolute;
  }
  <span class=hljs-selector-class>.axis</span> {
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
  }
  <span class=hljs-selector-class>.tick</span> {
    <span class=hljs-attribute>font-size</span>: .<span class=hljs-number>725em</span>;
    <span class=hljs-attribute>font-weight</span>: <span class=hljs-number>200</span>;
  }

  <span class=hljs-selector-class>.gridline</span> {
    <span class=hljs-attribute>border-left</span>: <span class=hljs-number>1px</span> dashed <span class=hljs-number>#aaa</span>;
  }

  <span class=hljs-selector-class>.tick-mark</span> {
    <span class=hljs-attribute>border-left</span>: <span class=hljs-number>1px</span> solid <span class=hljs-number>#aaa</span>;
  }
  <span class=hljs-selector-class>.baseline</span> {
    <span class=hljs-attribute>border-top</span>: <span class=hljs-number>1px</span> solid <span class=hljs-number>#aaa</span>;
  }

  <span class=hljs-selector-class>.tick</span> <span class=hljs-selector-class>.text</span> {
    <span class=hljs-attribute>color</span>: <span class=hljs-number>#666</span>;
    <span class=hljs-attribute>position</span>: relative;
    <span class=hljs-attribute>white-space</span>: nowrap;
    <span class=hljs-attribute>transform</span>: <span class=hljs-built_in>translateX</span>(-<span class=hljs-number>50%</span>);
  }
  <span class=hljs-comment>/* This looks a little better at 40 percent than 50 */</span>
  <span class=hljs-selector-class>.axis</span><span class=hljs-selector-class>.snapTicks</span> <span class=hljs-selector-class>.tick</span><span class=hljs-selector-pseudo>:last-child</span> {
    <span class=hljs-attribute>transform</span>: <span class=hljs-built_in>translateX</span>(-<span class=hljs-number>40%</span>);
  }
  <span class=hljs-selector-class>.axis</span><span class=hljs-selector-class>.snapTicks</span> <span class=hljs-selector-class>.tick</span><span class=hljs-selector-class>.tick-0</span> {
    <span class=hljs-attribute>transform</span>: <span class=hljs-built_in>translateX</span>(<span class=hljs-number>40%</span>);
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span></span></pre> </div><div class=contents style=display:none><pre class=svelte-1b77smd><span class=hljs-comment>&lt;!--
  @component
  Generates an HTML y-axis.
 --></span><span class=language-xml>
<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-keyword>import</span> { getContext } <span class=hljs-keyword>from</span> <span class=hljs-string>'svelte'</span>;

  <span class=hljs-keyword>const</span> { padding, xRange, yScale } = <span class="hljs-title function_">getContext</span>(<span class=hljs-string>'LayerCake'</span>);

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [gridlines=true] – Extend lines from the ticks into the chart space */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> gridlines = <span class=hljs-literal>true</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [tickMarks=false] – Show a vertical mark for each tick. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> tickMarks = <span class=hljs-literal>false</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Boolean</span>} [baseline=false] – Show a solid line at the bottom. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> baseline = <span class=hljs-literal>false</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Function</span>} [formatTick=d => d] – A function that passes the current tick value and expects a nicely formatted value in return. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> <span class="hljs-title function_">formatTick</span> = d => d;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number|Array|Function</span>} [ticks=4] – If this is a number, it passes that along to the [d3Scale.ticks](https://github.com/d3/d3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> ticks = <span class=hljs-number>4</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} [xTick=-4] – How far over to position the text marker. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> xTick = -<span class=hljs-number>4</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} [yTick=-1] – How far up and down to position the text marker. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> yTick = -<span class=hljs-number>1</span>;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>isBandwidth = <span class=hljs-keyword>typeof</span> $yScale.<span class=hljs-property>bandwidth</span> === <span class=hljs-string>'function'</span>;
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>tickVals = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(ticks) ? ticks :
    isBandwidth ?
      $yScale.<span class="hljs-title function_">domain</span>() :
      <span class=hljs-keyword>typeof</span> ticks === <span class=hljs-string>'function'</span> ?
        <span class="hljs-title function_">ticks</span>($yScale.<span class="hljs-title function_">ticks</span>()) :
          $yScale.<span class="hljs-title function_">ticks</span>(ticks);
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>'axis y-axis'</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'transform:translate(-</span></span></span><span class=language-javascript>{$padding.<span class=hljs-property>left</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px, 0)'</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>#each</span><span class=language-javascript> tickVals <span class=hljs-keyword>as</span> tick, i}</span><span class=language-xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>'tick tick-</span></span></span><span class=language-javascript>{i}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>'</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'top:</span></span></span><span class=language-javascript>{$yScale(tick) + (isBandwidth ? $yScale.<span class=hljs-property>bandwidth</span> () / <span class=hljs-number>2</span> : <span class=hljs-number>0</span>)}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%;left:</span></span></span><span class=language-javascript>{$xRange[<span class=hljs-number>0</span>]}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%;'</span>></span>
      </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> gridlines !== <span class=hljs-literal>false</span>}</span><span class=language-xml>
        <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"gridline"</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'top:0;left:</span></span></span><span class=language-javascript>{isBandwidth ? $padding.<span class=hljs-property>left</span> : <span class=hljs-number>0</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;right:-</span></span></span><span class=language-javascript>{$padding.<span class=hljs-property>left</span> + $padding.<span class=hljs-property>right</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;'</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
      </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
      </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> baseline !== <span class=hljs-literal>false</span> && i === <span class=hljs-number>0</span>}</span><span class=language-xml>
        <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"gridline baseline"</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'top:0;left:</span></span></span><span class=language-javascript>{isBandwidth ? $padding.<span class=hljs-property>left</span> : <span class=hljs-number>0</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>;right:-</span></span></span><span class=language-javascript>{$padding.<span class=hljs-property>left</span> + $padding.<span class=hljs-property>right</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;'</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
      </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
      </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> tickMarks === <span class=hljs-literal>true</span>}</span><span class=language-xml>
        <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"tick-mark"</span> <span class=hljs-attr>style</span>=<span class=hljs-string>'top:0;left:</span></span></span><span class=language-javascript>{isBandwidth ? $padding.<span class=hljs-property>left</span> - <span class=hljs-number>6</span> : <span class=hljs-number>0</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;width:6px;'</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
      </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
      <span class=hljs-tag>&lt;<span class=hljs-name>div</span>
        <span class=hljs-attr>class</span>=<span class=hljs-string>"text"</span>
        <span class=hljs-attr>style</span>=<span class=hljs-string>'
          top:</span></span></span><span class=language-javascript>{yTick}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;
          left:</span></span></span><span class=language-javascript>{isBandwidth ? ($padding.<span class=hljs-property>left</span> + xTick - <span class=hljs-number>4</span>) : <span class=hljs-number>0</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>px;
          transform: translate(</span></span></span><span class=language-javascript>{isBandwidth ? <span class=hljs-string>'-100%'</span> : <span class=hljs-number>0</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>, </span></span></span><span class=language-javascript>{isBandwidth ? -<span class=hljs-number>50</span> - <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>($yScale.<span class="hljs-title function_">bandwidth</span>() / -<span class=hljs-number>2</span>) : <span class=hljs-string>'-100'</span>}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%);
        '</span>
      ></span></span><span class=language-javascript>{<span class="hljs-title function_">formatTick</span>(tick)}</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    <span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>/each</span><span class=language-javascript>}</span><span class=language-xml>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span></span><span class=language-css>
  <span class=hljs-selector-class>.axis</span>,
  <span class=hljs-selector-class>.tick</span>,
  <span class=hljs-selector-class>.tick-mark</span>,
  <span class=hljs-selector-class>.gridline</span>,
  <span class=hljs-selector-class>.baseline</span>,
  <span class=hljs-selector-class>.text</span> {
    <span class=hljs-attribute>position</span>: absolute;
  }
  <span class=hljs-selector-class>.axis</span> {
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
  }
  <span class=hljs-selector-class>.tick</span> {
    <span class=hljs-attribute>font-size</span>: <span class=hljs-number>12px</span>;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>font-weight</span>: <span class=hljs-number>100</span>;
  }

  <span class=hljs-selector-class>.gridline</span> {
    <span class=hljs-attribute>border-top</span>: <span class=hljs-number>1px</span> dashed <span class=hljs-number>#aaa</span>;
  }
  <span class=hljs-selector-class>.tick-mark</span> {
    <span class=hljs-attribute>border-top</span>: <span class=hljs-number>1px</span> solid <span class=hljs-number>#aaa</span>;
  }

  <span class=hljs-selector-class>.baseline</span><span class=hljs-selector-class>.gridline</span> {
    <span class=hljs-attribute>border-top-style</span>: solid;
  }

  <span class=hljs-selector-class>.tick</span> <span class=hljs-selector-class>.text</span> {
    <span class=hljs-attribute>color</span>: <span class=hljs-number>#666</span>;
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span></span></pre> </div><div class=contents style=display:none><pre class=svelte-1b77smd><span class=hljs-comment>&lt;!--
  @component
  Adds a brush component to create a range between 0 and 1. Bind to the `min` and `max` props to use them in other components. See the [brushable example](https://layercake.graphcics/example/Brush) for use.
 --></span><span class=language-xml>
<span class=hljs-tag>&lt;<span class=hljs-name>script</span>></span></span><span class=language-javascript>
  <span class=hljs-keyword>import</span> { clamp } <span class=hljs-keyword>from</span> <span class=hljs-string>'yootils'</span>;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} min – The brush's min value. Useful to bind to. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> min;

  <span class=hljs-comment>/** <span class=hljs-doctag>@type</span> {<span class=hljs-type>Number</span>} max – The brush's max value. Useful to bind to. */</span>
  <span class=hljs-keyword>export</span> <span class=hljs-keyword>let</span> max;

  <span class=hljs-keyword>let</span> brush;

  <span class=hljs-keyword>const</span> <span class="hljs-title function_">p</span> = x => {
    <span class=hljs-keyword>const</span> { left, right } = brush.<span class="hljs-title function_">getBoundingClientRect</span>();
    <span class=hljs-keyword>return</span> <span class="hljs-title function_">clamp</span>((x - left) / (right - left), <span class=hljs-number>0</span>, <span class=hljs-number>1</span>);
  };

  <span class=hljs-keyword>const</span> <span class="hljs-title function_">handler</span> = fn => {
    <span class=hljs-keyword>return</span> <span class=hljs-function><span class=hljs-params>e</span> =></span> {
      <span class=hljs-keyword>if</span> (e.<span class=hljs-property>type</span> === <span class=hljs-string>'touchstart'</span>) {
        <span class=hljs-keyword>if</span> (e.<span class=hljs-property>touches</span>.<span class=hljs-property>length</span> !== <span class=hljs-number>1</span>) <span class=hljs-keyword>return</span>;
        e = e.<span class=hljs-property>touches</span>[<span class=hljs-number>0</span>];
      }

      <span class=hljs-keyword>const</span> id = e.<span class=hljs-property>identifier</span>;
      <span class=hljs-keyword>const</span> start = { min, max, <span class=hljs-attr>p</span>: <span class="hljs-title function_">p</span>(e.<span class=hljs-property>clientX</span>) };

      <span class=hljs-keyword>const</span> <span class="hljs-title function_">handle_move</span> = e => {
        <span class=hljs-keyword>if</span> (e.<span class=hljs-property>type</span> === <span class=hljs-string>'touchmove'</span>) {
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>changedTouches</span>.<span class=hljs-property>length</span> !== <span class=hljs-number>1</span>) <span class=hljs-keyword>return</span>;
          e = e.<span class=hljs-property>changedTouches</span>[<span class=hljs-number>0</span>];
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>identifier</span> !== id) <span class=hljs-keyword>return</span>;
        }

        <span class="hljs-title function_">fn</span>(start, <span class="hljs-title function_">p</span>(e.<span class=hljs-property>clientX</span>));
      };

      <span class=hljs-keyword>const</span> <span class="hljs-title function_">handle_end</span> = e => {
        <span class=hljs-keyword>if</span> (e.<span class=hljs-property>type</span> === <span class=hljs-string>'touchend'</span>) {
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>changedTouches</span>.<span class=hljs-property>length</span> !== <span class=hljs-number>1</span>) <span class=hljs-keyword>return</span>;
          <span class=hljs-keyword>if</span> (e.<span class=hljs-property>changedTouches</span>[<span class=hljs-number>0</span>].<span class=hljs-property>identifier</span> !== id) <span class=hljs-keyword>return</span>;
        } <span class=hljs-keyword>else</span> <span class=hljs-keyword>if</span> (e.<span class=hljs-property>target</span> === brush) {
          <span class="hljs-title function_">clear</span>();
        }

        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'mousemove'</span>, handle_move);
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'mouseup'</span>, handle_end);

        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'touchmove'</span>, handle_move);
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class=hljs-string>'touchend'</span>, handle_end);
      };

      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'mousemove'</span>, handle_move);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'mouseup'</span>, handle_end);

      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'touchmove'</span>, handle_move);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>'touchend'</span>, handle_end);
    };
  };

  <span class=hljs-keyword>const</span> <span class="hljs-title function_">clear</span> = (<span class=hljs-params></span>) => {
    min = <span class=hljs-literal>null</span>;
    max = <span class=hljs-literal>null</span>;
  }

  <span class=hljs-keyword>const</span> reset = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    min = <span class="hljs-title function_">clamp</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start.<span class=hljs-property>p</span>, p), <span class=hljs-number>0</span>, <span class=hljs-number>1</span>);
    max = <span class="hljs-title function_">clamp</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(start.<span class=hljs-property>p</span>, p), <span class=hljs-number>0</span>, <span class=hljs-number>1</span>);
  });

  <span class=hljs-keyword>const</span> move = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    <span class=hljs-keyword>const</span> d = <span class="hljs-title function_">clamp</span>(p - start.<span class=hljs-property>p</span>, -start.<span class=hljs-property>min</span>, <span class=hljs-number>1</span> - start.<span class=hljs-property>max</span>);
    min = start.<span class=hljs-property>min</span> + d;
    max = start.<span class=hljs-property>max</span> + d;
  });

  <span class=hljs-keyword>const</span> adjust_min = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    min = p > start.<span class=hljs-property>max</span> ? start.<span class=hljs-property>max</span> : p;
    max = p > start.<span class=hljs-property>max</span> ? p : start.<span class=hljs-property>max</span>;
  });

  <span class=hljs-keyword>const</span> adjust_max = <span class="hljs-title function_">handler</span>(<span class=hljs-function>(<span class=hljs-params>start, p</span>) =></span> {
    min = p &lt; start.<span class=hljs-property>min</span> ? p : start.<span class=hljs-property>min</span>;
    max = p &lt; start.<span class=hljs-property>min</span> ? start.<span class=hljs-property>min</span> : p;
  });
</span><span class=hljs-keyword>
  $: </span><span class=language-javascript>left = <span class=hljs-number>100</span> * min;
</span><span class=hljs-keyword>  $: </span><span class=language-javascript>right = <span class=hljs-number>100</span> * (<span class=hljs-number>1</span> - max);
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>script</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>bind:this</span>=</span></span><span class=language-javascript>{brush}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-outer"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{reset}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{reset}</span><span class=language-xml><span class=hljs-tag>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>#if</span><span class=language-javascript> min !== <span class=hljs-literal>null</span>}</span><span class=language-xml>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-inner"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{move}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{move}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>style</span>=<span class=hljs-string>"left: </span></span></span><span class=language-javascript>{left}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%; right: </span></span></span><span class=language-javascript>{right}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%"</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-handle"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_min}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_min}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>style</span>=<span class=hljs-string>"left: </span></span></span><span class=language-javascript>{left}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%"</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
    <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>"brush-handle"</span> <span class=hljs-attr>on:mousedown</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_max}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>on:touchstart</span>|<span class=hljs-attr>stopPropagation</span>=</span></span><span class=language-javascript>{adjust_max}</span><span class=language-xml><span class=hljs-tag> <span class=hljs-attr>style</span>=<span class=hljs-string>"right: </span></span></span><span class=language-javascript>{right}</span><span class=language-xml><span class=hljs-tag><span class=hljs-string>%"</span>></span><span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>
  </span><span class=language-javascript>{</span><span class=hljs-keyword>/if</span><span class=language-javascript>}</span><span class=language-xml>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>></span>

<span class=hljs-tag>&lt;<span class=hljs-name>style</span>></span></span><span class=language-css>
  <span class=hljs-selector-class>.brush-outer</span> {
    <span class=hljs-attribute>position</span>: relative;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-built_in>calc</span>(<span class=hljs-number>100%</span> + <span class=hljs-number>5px</span>);
    <span class=hljs-attribute>top</span>: -<span class=hljs-number>5px</span>;
  }

  <span class=hljs-selector-class>.brush-inner</span> {
    <span class=hljs-attribute>position</span>: absolute;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>cursor</span>: move;
    <span class=hljs-comment>/* mix-blend-mode: difference; */</span>
    <span class=hljs-attribute>background-color</span>: <span class=hljs-number>#cccccc90</span>;
    <span class=hljs-comment>/* border: 1px solid #000; */</span>
  }

  <span class=hljs-selector-class>.brush-handle</span> {
    <span class=hljs-attribute>position</span>: absolute;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>0</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>cursor</span>: ew-resize;
  }

  <span class=hljs-selector-class>.brush-handle</span><span class=hljs-selector-pseudo>::before</span> {
    <span class=hljs-attribute>position</span>: absolute;
    <span class=hljs-attribute>content</span>: <span class=hljs-string>''</span>;
    <span class=hljs-attribute>width</span>: <span class=hljs-number>8px</span>;
    <span class=hljs-attribute>left</span>: -<span class=hljs-number>4px</span>;
    <span class=hljs-attribute>height</span>: <span class=hljs-number>100%</span>;
    <span class=hljs-attribute>background</span>: transparent;
  }
</span><span class=language-xml><span class=hljs-tag>&lt;/<span class=hljs-name>style</span>></span></span></pre> </div><div class=contents style=display:none><pre class=svelte-1b77smd>myX,myY
1979,7.19
1980,7.83
1981,7.24
1982,7.44
1983,7.51
1984,7.1
1985,6.91
1986,7.53
1987,7.47
1988,7.48
1989,7.03
1990,6.23
1991,6.54
1992,7.54
1993,6.5
1994,7.18
1995,6.12
1996,7.87
1997,6.73
1998,6.55
1999,6.23
2000,6.31
2001,6.74
2002,5.95
2003,6.13
2004,6.04
2005,5.56
2006,5.91
2007,4.29
2008,4.72
2009,5.38
2010,4.92
2011,4.61
2012,3.62
2013,5.35
2014,5.28
2015,4.63
2016,4.72</pre> </div></div></div></div></main> <script type=application/json data-type=svelte-data data-url=/api/guide-sections.json>{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"[{\"html\":null,\"metadata\":{\"title\":\"Introduction\"},\"subsections\":[{\"slug\":\"what-is-layer-cake\",\"title\":\"What is Layer Cake?\"},{\"slug\":\"key-concepts\",\"title\":\"Key Concepts\"},{\"slug\":\"getting-started\",\"title\":\"Getting started\"},{\"slug\":\"using-layout-components\",\"title\":\"Using layout components\"},{\"slug\":\"layer-components\",\"title\":\"Layer components\"},{\"slug\":\"data-less-cakes\",\"title\":\"Data-less cakes\"},{\"slug\":\"server-side-rendering\",\"title\":\"Server-side rendering\"}],\"slug\":\"introduction\",\"file\":\"00-introduction.md\"},{\"html\":null,\"metadata\":{\"title\":\"Troubleshooting\"},\"subsections\":[{\"slug\":\"the-chart-is-blank\",\"title\":\"The chart is blank\"},{\"slug\":\"the-chart-is-a-very-small-square\",\"title\":\"The chart is a very small square\"},{\"slug\":\"the-library-isn39t-building-properly\",\"title\":\"The library isn't building properly\"}],\"slug\":\"troubleshooting\",\"file\":\"01-troubleshooting.md\"},{\"html\":null,\"metadata\":{\"title\":\"LayerCake props\"},\"subsections\":[{\"slug\":\"data\",\"title\":\"data\"},{\"slug\":\"x\",\"title\":\"x\"},{\"slug\":\"y\",\"title\":\"y\"},{\"slug\":\"z\",\"title\":\"z\"},{\"slug\":\"r\",\"title\":\"r\"},{\"slug\":\"padding\",\"title\":\"padding\"},{\"slug\":\"xscale\",\"title\":\"xScale\"},{\"slug\":\"yscale\",\"title\":\"yScale\"},{\"slug\":\"zscale\",\"title\":\"zScale\"},{\"slug\":\"rscale\",\"title\":\"rScale\"},{\"slug\":\"xdomain\",\"title\":\"xDomain\"},{\"slug\":\"ydomain\",\"title\":\"yDomain\"},{\"slug\":\"zdomain\",\"title\":\"zDomain\"},{\"slug\":\"rdomain\",\"title\":\"rDomain\"},{\"slug\":\"xreverse\",\"title\":\"xReverse\"},{\"slug\":\"yreverse\",\"title\":\"yReverse\"},{\"slug\":\"zreverse\",\"title\":\"zReverse\"},{\"slug\":\"rreverse\",\"title\":\"rReverse\"},{\"slug\":\"xrange\",\"title\":\"xRange\"},{\"slug\":\"yrange\",\"title\":\"yRange\"},{\"slug\":\"zrange\",\"title\":\"zRange\"},{\"slug\":\"rrange\",\"title\":\"rRange\"},{\"slug\":\"xpadding\",\"title\":\"xPadding\"},{\"slug\":\"ypadding\",\"title\":\"yPadding\"},{\"slug\":\"zpadding\",\"title\":\"zPadding\"},{\"slug\":\"rpadding\",\"title\":\"rPadding\"},{\"slug\":\"xnice\",\"title\":\"xNice\"},{\"slug\":\"ynice\",\"title\":\"yNice\"},{\"slug\":\"znice\",\"title\":\"zNice\"},{\"slug\":\"rnice\",\"title\":\"rNice\"},{\"slug\":\"extents\",\"title\":\"extents\"},{\"slug\":\"flatdata\",\"title\":\"flatData\"},{\"slug\":\"ssr\",\"title\":\"ssr\"},{\"slug\":\"percentrange\",\"title\":\"percentRange\"},{\"slug\":\"position\",\"title\":\"position\"},{\"slug\":\"custom\",\"title\":\"custom\"}],\"slug\":\"layercake-props\",\"file\":\"02-layercake-props.md\"},{\"html\":null,\"metadata\":{\"title\":\"Computed context values\"},\"subsections\":[{\"slug\":\"activegetters\",\"title\":\"activeGetters\"},{\"slug\":\"aspectratio\",\"title\":\"aspectRatio\"},{\"slug\":\"box\",\"title\":\"box\"},{\"slug\":\"config\",\"title\":\"config\"},{\"slug\":\"containerwidth\",\"title\":\"containerWidth\"},{\"slug\":\"containerheight\",\"title\":\"containerHeight\"},{\"slug\":\"extents-1\",\"title\":\"extents\"},{\"slug\":\"width\",\"title\":\"width\"},{\"slug\":\"height\",\"title\":\"height\"},{\"slug\":\"x-1\",\"title\":\"x\"},{\"slug\":\"y-1\",\"title\":\"y\"},{\"slug\":\"z-1\",\"title\":\"z\"},{\"slug\":\"r-1\",\"title\":\"r\"},{\"slug\":\"xdomain-1\",\"title\":\"xDomain\"},{\"slug\":\"ydomain-1\",\"title\":\"yDomain\"},{\"slug\":\"zdomain-1\",\"title\":\"zDomain\"},{\"slug\":\"rdomain-1\",\"title\":\"rDomain\"},{\"slug\":\"xrange-1\",\"title\":\"xRange\"},{\"slug\":\"yrange-1\",\"title\":\"yRange\"},{\"slug\":\"zrange-1\",\"title\":\"zRange\"},{\"slug\":\"rrange-1\",\"title\":\"rRange\"},{\"slug\":\"xget\",\"title\":\"xGet(...)\"},{\"slug\":\"yget\",\"title\":\"yGet(...)\"},{\"slug\":\"zget\",\"title\":\"zGet(...)\"},{\"slug\":\"rget\",\"title\":\"rGet(...)\"},{\"slug\":\"xscale-1\",\"title\":\"xScale(...)\"},{\"slug\":\"yscale-1\",\"title\":\"yScale(...)\"},{\"slug\":\"zscale-1\",\"title\":\"zScale(...)\"},{\"slug\":\"rscale-1\",\"title\":\"rScale(...)\"}],\"slug\":\"computed-context-values\",\"file\":\"03-computed-context-values.md\"},{\"html\":null,\"metadata\":{\"title\":\"Layout components\"},\"subsections\":[{\"slug\":\"html\",\"title\":\"Html\"},{\"slug\":\"svg\",\"title\":\"Svg\"},{\"slug\":\"scaledsvg\",\"title\":\"ScaledSvg\"},{\"slug\":\"canvas\",\"title\":\"Canvas\"},{\"slug\":\"webgl\",\"title\":\"WebGL\"}],\"slug\":\"layout-components\",\"file\":\"04-layout-components.md\"},{\"html\":null,\"metadata\":{\"title\":\"Layout component props\"},\"subsections\":[{\"slug\":\"zindex\",\"title\":\"zIndex\"},{\"slug\":\"pointerevents\",\"title\":\"pointerEvents\"},{\"slug\":\"viewbox\",\"title\":\"viewBox\"},{\"slug\":\"fixedaspectratio\",\"title\":\"fixedAspectRatio\"},{\"slug\":\"contextattributes\",\"title\":\"contextAttributes\"}],\"slug\":\"layout-component-props\",\"file\":\"05-layout-component-props.md\"},{\"html\":null,\"metadata\":{\"title\":\"Helper functions\"},\"subsections\":[{\"slug\":\"flatten\",\"title\":\"flatten(...)\"},{\"slug\":\"scalecanvas\",\"title\":\"scaleCanvas(...)\"},{\"slug\":\"calcextents\",\"title\":\"calcExtents(...)\"},{\"slug\":\"uniques\",\"title\":\"uniques(...)\"},{\"slug\":\"raise\",\"title\":\"raise(...)\"}],\"slug\":\"helper-functions\",\"file\":\"99-helper-functions.md\"}]"}</script> <script type=application/json data-type=svelte-data data-url=Brush.json>{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"main\":{\"title\":\"index.svelte\",\"contents\":\"\u003Cscript\u003E\\n  import { LayerCake, ScaledSvg, Html } from 'layercake';\\n\\n  import Line from '.\u002Fcomponents\u002FLine.svelte';\\n  import Area from '.\u002Fcomponents\u002FArea.svelte';\\n  import AxisX from '.\u002Fcomponents\u002FAxisX.html.svelte';\\n  import AxisY from '.\u002Fcomponents\u002FAxisY.html.svelte';\\n  import Brush from '.\u002Fcomponents\u002FBrush.html.svelte';\\n\\n  \u002F\u002F This example loads csv data as json using @rollup\u002Fplugin-dsv\\n  import data from '.\u002Fdata\u002Fpoints.csv';\\n\\n  let brushExtents = [null, null];\\n\\n  const xKey = 'myX';\\n  const yKey = 'myY';\\n\\n  data.forEach(d =\u003E {\\n    d[yKey] = +d[yKey];\\n  });\\n\\n  let brushedData;\\n  $: {\\n    brushedData = data.slice((brushExtents[0] || 0) * data.length, (brushExtents[1] || 1) * data.length);\\n    if (brushedData.length \u003C 2) {\\n      brushedData = data.slice(brushExtents[0] * data.length, brushExtents[0] * data.length + 2)\\n    }\\n  }\\n\u003C\u002Fscript\u003E\\n\\n\u003Cstyle\u003E\\n  \u002F*\\n    The wrapper div needs to have an explicit width and height in CSS.\\n    It can also be a flexbox child or CSS grid element.\\n    The point being it needs dimensions since the \u003CLayerCake\u003E element will\\n    expand to fill it.\\n  *\u002F\\n  .chart-container {\\n    width: 100%;\\n    height: 80%;\\n  }\\n  .brush-container {\\n    width: 100%;\\n    height: 20%;\\n  }\\n\u003C\u002Fstyle\u003E\\n\\n\u003Cdiv class=\\\"chart-container\\\"\u003E\\n  \u003CLayerCake\\n    ssr={true}\\n    percentRange={true}\\n    padding={{ right: 10, bottom: 20, left: 25 }}\\n    x={xKey}\\n    y={yKey}\\n    yDomain={[0, null]}\\n    data={brushedData}\\n  \u003E\\n    \u003CHtml\u003E\\n      \u003CAxisX\\n        ticks={ticks =\u003E {\\n          const filtered = ticks.filter(t =\u003E t % 1 === 0);\\n          if (filtered.length \u003E 7) {\\n            return filtered.filter((t, i) =\u003E i % 2 === 0);\\n          }\\n          return filtered;\\n        }}\\n      \u002F\u003E\\n      \u003CAxisY\\n        ticks={4}\\n      \u002F\u003E\\n    \u003C\u002FHtml\u003E\\n    \u003CScaledSvg\u003E\\n      \u003CLine\\n        stroke='#00e047'\\n      \u002F\u003E\\n      \u003CArea\\n        fill='#00e04710'\\n      \u002F\u003E\\n    \u003C\u002FScaledSvg\u003E\\n  \u003C\u002FLayerCake\u003E\\n\u003C\u002Fdiv\u003E\\n\\n\u003Cdiv class=\\\"brush-container\\\"\u003E\\n  \u003CLayerCake\\n    ssr={true}\\n    percentRange={true}\\n    padding={{ top: 5 }}\\n    x={xKey}\\n    y={yKey}\\n    yDomain={[0, null]}\\n    data={data}\\n  \u003E\\n    \u003CScaledSvg\u003E\\n      \u003CLine\\n        stroke='#00e047'\\n      \u002F\u003E\\n      \u003CArea\\n        fill='#00e04710'\\n      \u002F\u003E\\n    \u003C\u002FScaledSvg\u003E\\n    \u003CHtml\u003E\\n      \u003CBrush bind:min={brushExtents[0]} bind:max={brushExtents[1]}\u002F\u003E\\n    \u003C\u002FHtml\u003E\\n  \u003C\u002FLayerCake\u003E\\n\u003C\u002Fdiv\u003E\"},\"dek\":\"\",\"components\":[{\"title\":\".\u002Fcomponents\u002FLine.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates an SVG area shape using the `area` function from [d3-shape](https:\u002F\u002Fgithub.com\u002Fd3\u002Fd3-shape).\\n --\u003E\\n\u003Cscript\u003E\\n  import { getContext } from 'svelte';\\n\\n  const { data, xGet, yGet } = getContext('LayerCake');\\n\\n  \u002F** @type {String} [stroke='#ab00d6'] – The shape's fill color. This is technically optional because it comes with a default value but you'll likely want to replace it with your own color. *\u002F\\n  export let stroke = '#ab00d6';\\n\\n  $: path = 'M' + $data\\n    .map(d =\u003E {\\n      return $xGet(d) + ',' + $yGet(d);\\n    })\\n    .join('L');\\n\u003C\u002Fscript\u003E\\n\\n\u003Cpath class='path-line' d='{path}' {stroke}\u003E\u003C\u002Fpath\u003E\\n\\n\u003Cstyle\u003E\\n  .path-line {\\n    fill: none;\\n    stroke-linejoin: round;\\n    stroke-linecap: round;\\n    stroke-width: 2;\\n  }\\n\u003C\u002Fstyle\u003E\"},{\"title\":\".\u002Fcomponents\u002FArea.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates an SVG area shape using the `area` function from [d3-shape](https:\u002F\u002Fgithub.com\u002Fd3\u002Fd3-shape).\\n --\u003E\\n\u003Cscript\u003E\\n  import { getContext } from 'svelte';\\n\\n  const { data, xGet, yGet, xScale, yScale, extents } = getContext('LayerCake');\\n\\n  \u002F**  @type {String} [fill='#ab00d610'] The shape's fill color. This is technically optional because it comes with a default value but you'll likely want to replace it with your own color. *\u002F\\n  export let fill = '#ab00d610';\\n\\n  $: path = 'M' + $data\\n    .map(d =\u003E {\\n      return $xGet(d) + ',' + $yGet(d);\\n    })\\n    .join('L');\\n\\n  let area;\\n\\n  $: {\\n    const yRange = $yScale.range();\\n    area = path + (\\n      'L' + $xScale($extents.x ? $extents.x[1] : 0) + ',' + yRange[0] +\\n      'L' + $xScale($extents.x ? $extents.x[0] : 0) + ',' + yRange[0] +\\n      'Z'\\n    );\\n  }\\n\u003C\u002Fscript\u003E\\n\\n\u003Cpath class='path-area' d='{area}' {fill}\u003E\u003C\u002Fpath\u003E\"},{\"title\":\".\u002Fcomponents\u002FAxisX.html.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates an HTML x-axis, useful for server-side rendered charts.  This component is also configured to detect if your x-scale is an ordinal scale. If so, it will place the markers in the middle of the bandwidth.\\n --\u003E\\n\u003Cscript\u003E\\n  import { getContext } from 'svelte';\\n\\n  const { xScale } = getContext('LayerCake');\\n\\n  \u002F** @type {Boolean} [gridlines=true] – Extend lines from the ticks into the chart space. *\u002F\\n  export let gridlines = true;\\n\\n  \u002F** @type {Boolean} [tickMarks=false] – Show a vertical mark for each tick. *\u002F\\n  export let tickMarks = false;\\n\\n  \u002F** @type {Boolean} [baseline=false] – Show a solid line at the bottom. *\u002F\\n  export let baseline = false;\\n\\n  \u002F** @type {Boolean} [snapTicks=false] – Instead of centering the text on the first and the last items, align them to the edges of the chart. *\u002F\\n  export let snapTicks = false;\\n\\n  \u002F** @type {Function} [formatTick=d =\u003E d] – A function that passes the current tick value and expects a nicely formatted value in return. *\u002F\\n  export let formatTick = d =\u003E d;\\n\\n  \u002F** @type {Number|Array|Function} [ticks] – If this is a number, it passes that along to the [d3Scale.ticks](https:\u002F\u002Fgithub.com\u002Fd3\u002Fd3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. If nothing, it uses the default ticks supplied by the D3 function. *\u002F\\n  export let ticks = undefined;\\n\\n  \u002F** @type {Number} [yTick=7] – The distance from the baseline to place each tick value, in pixels. *\u002F\\n  export let yTick = 7;\\n\\n  $: isBandwidth = typeof $xScale.bandwidth === 'function';\\n\\n  $: tickVals = Array.isArray(ticks) ? ticks :\\n    isBandwidth ?\\n      $xScale.domain() :\\n      typeof ticks === 'function' ?\\n        ticks($xScale.ticks()) :\\n          $xScale.ticks(ticks);\\n\u003C\u002Fscript\u003E\\n\\n\u003Cdiv class='axis x-axis' class:snapTicks\u003E\\n  {#each tickVals as tick, i}\\n    {#if gridlines !== false}\\n      \u003Cdiv class=\\\"gridline\\\" style='left:{$xScale(tick)}%;top: 0px;bottom: 0;'\u003E\u003C\u002Fdiv\u003E\\n    {\u002Fif}\\n    {#if tickMarks === true}\\n      \u003Cdiv class=\\\"tick-mark\\\" style='left:{$xScale(tick) + (isBandwidth ? $xScale.bandwidth() \u002F 2 : 0)}%;height:6px;bottom: -6px;'\u003E\u003C\u002Fdiv\u003E\\n    {\u002Fif}\\n    \u003Cdiv\\n      class='tick tick-{ i }'\\n      style='left:{$xScale(tick) + (isBandwidth ? $xScale.bandwidth() \u002F 2 : 0)}%;top:100%;'\u003E\\n      \u003Cdiv\\n        class=\\\"text\\\"\\n        style='top:{(yTick)}px;'\u003E{formatTick(tick)}\u003C\u002Fdiv\u003E\\n    \u003C\u002Fdiv\u003E\\n  {\u002Feach}\\n  {#if baseline === true}\\n    \u003Cdiv class=\\\"baseline\\\" style='top: 100%;width: 100%;'\u003E\u003C\u002Fdiv\u003E\\n  {\u002Fif}\\n\u003C\u002Fdiv\u003E\\n\\n\u003Cstyle\u003E\\n  .axis,\\n  .tick,\\n  .tick-mark,\\n  .gridline,\\n  .baseline {\\n    position: absolute;\\n  }\\n  .axis {\\n    width: 100%;\\n    height: 100%;\\n  }\\n  .tick {\\n    font-size: .725em;\\n    font-weight: 200;\\n  }\\n\\n  .gridline {\\n    border-left: 1px dashed #aaa;\\n  }\\n\\n  .tick-mark {\\n    border-left: 1px solid #aaa;\\n  }\\n  .baseline {\\n    border-top: 1px solid #aaa;\\n  }\\n\\n  .tick .text {\\n    color: #666;\\n    position: relative;\\n    white-space: nowrap;\\n    transform: translateX(-50%);\\n  }\\n  \u002F* This looks a little better at 40 percent than 50 *\u002F\\n  .axis.snapTicks .tick:last-child {\\n    transform: translateX(-40%);\\n  }\\n  .axis.snapTicks .tick.tick-0 {\\n    transform: translateX(40%);\\n  }\\n\u003C\u002Fstyle\u003E\"},{\"title\":\".\u002Fcomponents\u002FAxisY.html.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Generates an HTML y-axis.\\n --\u003E\\n\u003Cscript\u003E\\n  import { getContext } from 'svelte';\\n\\n  const { padding, xRange, yScale } = getContext('LayerCake');\\n\\n  \u002F** @type {Boolean} [gridlines=true] – Extend lines from the ticks into the chart space *\u002F\\n  export let gridlines = true;\\n\\n  \u002F** @type {Boolean} [tickMarks=false] – Show a vertical mark for each tick. *\u002F\\n  export let tickMarks = false;\\n\\n  \u002F** @type {Boolean} [baseline=false] – Show a solid line at the bottom. *\u002F\\n  export let baseline = false;\\n\\n  \u002F** @type {Function} [formatTick=d =\u003E d] – A function that passes the current tick value and expects a nicely formatted value in return. *\u002F\\n  export let formatTick = d =\u003E d;\\n\\n  \u002F** @type {Number|Array|Function} [ticks=4] – If this is a number, it passes that along to the [d3Scale.ticks](https:\u002F\u002Fgithub.com\u002Fd3\u002Fd3-scale) function. If this is an array, hardcodes the ticks to those values. If it's a function, passes along the default tick values and expects an array of tick values in return. *\u002F\\n  export let ticks = 4;\\n\\n  \u002F** @type {Number} [xTick=-4] – How far over to position the text marker. *\u002F\\n  export let xTick = -4;\\n\\n  \u002F** @type {Number} [yTick=-1] – How far up and down to position the text marker. *\u002F\\n  export let yTick = -1;\\n\\n  $: isBandwidth = typeof $yScale.bandwidth === 'function';\\n\\n  $: tickVals = Array.isArray(ticks) ? ticks :\\n    isBandwidth ?\\n      $yScale.domain() :\\n      typeof ticks === 'function' ?\\n        ticks($yScale.ticks()) :\\n          $yScale.ticks(ticks);\\n\u003C\u002Fscript\u003E\\n\\n\u003Cdiv class='axis y-axis' style='transform:translate(-{$padding.left}px, 0)'\u003E\\n  {#each tickVals as tick, i}\\n    \u003Cdiv class='tick tick-{i}' style='top:{$yScale(tick) + (isBandwidth ? $yScale.bandwidth () \u002F 2 : 0)}%;left:{$xRange[0]}%;'\u003E\\n      {#if gridlines !== false}\\n        \u003Cdiv class=\\\"gridline\\\" style='top:0;left:{isBandwidth ? $padding.left : 0}px;right:-{$padding.left + $padding.right}px;'\u003E\u003C\u002Fdiv\u003E\\n      {\u002Fif}\\n      {#if baseline !== false && i === 0}\\n        \u003Cdiv class=\\\"gridline baseline\\\" style='top:0;left:{isBandwidth ? $padding.left : 0};right:-{$padding.left + $padding.right}px;'\u003E\u003C\u002Fdiv\u003E\\n      {\u002Fif}\\n      {#if tickMarks === true}\\n        \u003Cdiv class=\\\"tick-mark\\\" style='top:0;left:{isBandwidth ? $padding.left - 6 : 0}px;width:6px;'\u003E\u003C\u002Fdiv\u003E\\n      {\u002Fif}\\n      \u003Cdiv\\n        class=\\\"text\\\"\\n        style='\\n          top:{yTick}px;\\n          left:{isBandwidth ? ($padding.left + xTick - 4) : 0}px;\\n          transform: translate({isBandwidth ? '-100%' : 0}, {isBandwidth ? -50 - Math.floor($yScale.bandwidth() \u002F -2) : '-100'}%);\\n        '\\n      \u003E{formatTick(tick)}\u003C\u002Fdiv\u003E\\n    \u003C\u002Fdiv\u003E\\n  {\u002Feach}\\n\u003C\u002Fdiv\u003E\\n\\n\u003Cstyle\u003E\\n  .axis,\\n  .tick,\\n  .tick-mark,\\n  .gridline,\\n  .baseline,\\n  .text {\\n    position: absolute;\\n  }\\n  .axis {\\n    width: 100%;\\n    height: 100%;\\n  }\\n  .tick {\\n    font-size: 12px;\\n    width: 100%;\\n    font-weight: 100;\\n  }\\n\\n  .gridline {\\n    border-top: 1px dashed #aaa;\\n  }\\n  .tick-mark {\\n    border-top: 1px solid #aaa;\\n  }\\n\\n  .baseline.gridline {\\n    border-top-style: solid;\\n  }\\n\\n  .tick .text {\\n    color: #666;\\n  }\\n\u003C\u002Fstyle\u003E\"},{\"title\":\".\u002Fcomponents\u002FBrush.html.svelte\",\"contents\":\"\u003C!--\\n  @component\\n  Adds a brush component to create a range between 0 and 1. Bind to the `min` and `max` props to use them in other components. See the [brushable example](https:\u002F\u002Flayercake.graphcics\u002Fexample\u002FBrush) for use.\\n --\u003E\\n\u003Cscript\u003E\\n  import { clamp } from 'yootils';\\n\\n  \u002F** @type {Number} min – The brush's min value. Useful to bind to. *\u002F\\n  export let min;\\n\\n  \u002F** @type {Number} max – The brush's max value. Useful to bind to. *\u002F\\n  export let max;\\n\\n  let brush;\\n\\n  const p = x =\u003E {\\n    const { left, right } = brush.getBoundingClientRect();\\n    return clamp((x - left) \u002F (right - left), 0, 1);\\n  };\\n\\n  const handler = fn =\u003E {\\n    return e =\u003E {\\n      if (e.type === 'touchstart') {\\n        if (e.touches.length !== 1) return;\\n        e = e.touches[0];\\n      }\\n\\n      const id = e.identifier;\\n      const start = { min, max, p: p(e.clientX) };\\n\\n      const handle_move = e =\u003E {\\n        if (e.type === 'touchmove') {\\n          if (e.changedTouches.length !== 1) return;\\n          e = e.changedTouches[0];\\n          if (e.identifier !== id) return;\\n        }\\n\\n        fn(start, p(e.clientX));\\n      };\\n\\n      const handle_end = e =\u003E {\\n        if (e.type === 'touchend') {\\n          if (e.changedTouches.length !== 1) return;\\n          if (e.changedTouches[0].identifier !== id) return;\\n        } else if (e.target === brush) {\\n          clear();\\n        }\\n\\n        window.removeEventListener('mousemove', handle_move);\\n        window.removeEventListener('mouseup', handle_end);\\n\\n        window.removeEventListener('touchmove', handle_move);\\n        window.removeEventListener('touchend', handle_end);\\n      };\\n\\n      window.addEventListener('mousemove', handle_move);\\n      window.addEventListener('mouseup', handle_end);\\n\\n      window.addEventListener('touchmove', handle_move);\\n      window.addEventListener('touchend', handle_end);\\n    };\\n  };\\n\\n  const clear = () =\u003E {\\n    min = null;\\n    max = null;\\n  }\\n\\n  const reset = handler((start, p) =\u003E {\\n    min = clamp(Math.min(start.p, p), 0, 1);\\n    max = clamp(Math.max(start.p, p), 0, 1);\\n  });\\n\\n  const move = handler((start, p) =\u003E {\\n    const d = clamp(p - start.p, -start.min, 1 - start.max);\\n    min = start.min + d;\\n    max = start.max + d;\\n  });\\n\\n  const adjust_min = handler((start, p) =\u003E {\\n    min = p \u003E start.max ? start.max : p;\\n    max = p \u003E start.max ? p : start.max;\\n  });\\n\\n  const adjust_max = handler((start, p) =\u003E {\\n    min = p \u003C start.min ? p : start.min;\\n    max = p \u003C start.min ? start.min : p;\\n  });\\n\\n  $: left = 100 * min;\\n  $: right = 100 * (1 - max);\\n\u003C\u002Fscript\u003E\\n\\n\u003Cdiv bind:this={brush} class=\\\"brush-outer\\\" on:mousedown|stopPropagation={reset} on:touchstart|stopPropagation={reset}\u003E\\n  {#if min !== null}\\n    \u003Cdiv class=\\\"brush-inner\\\" on:mousedown|stopPropagation={move} on:touchstart|stopPropagation={move} style=\\\"left: {left}%; right: {right}%\\\"\u003E\u003C\u002Fdiv\u003E\\n    \u003Cdiv class=\\\"brush-handle\\\" on:mousedown|stopPropagation={adjust_min} on:touchstart|stopPropagation={adjust_min} style=\\\"left: {left}%\\\"\u003E\u003C\u002Fdiv\u003E\\n    \u003Cdiv class=\\\"brush-handle\\\" on:mousedown|stopPropagation={adjust_max} on:touchstart|stopPropagation={adjust_max} style=\\\"right: {right}%\\\"\u003E\u003C\u002Fdiv\u003E\\n  {\u002Fif}\\n\u003C\u002Fdiv\u003E\\n\\n\u003Cstyle\u003E\\n  .brush-outer {\\n    position: relative;\\n    width: 100%;\\n    height: calc(100% + 5px);\\n    top: -5px;\\n  }\\n\\n  .brush-inner {\\n    position: absolute;\\n    height: 100%;\\n    cursor: move;\\n    \u002F* mix-blend-mode: difference; *\u002F\\n    background-color: #cccccc90;\\n    \u002F* border: 1px solid #000; *\u002F\\n  }\\n\\n  .brush-handle {\\n    position: absolute;\\n    width: 0;\\n    height: 100%;\\n    cursor: ew-resize;\\n  }\\n\\n  .brush-handle::before {\\n    position: absolute;\\n    content: '';\\n    width: 8px;\\n    left: -4px;\\n    height: 100%;\\n    background: transparent;\\n  }\\n\u003C\u002Fstyle\u003E\"}],\"modules\":[],\"componentModules\":[],\"componentComponents\":[],\"csvs\":[{\"title\":\".\u002Fdata\u002Fpoints.csv\",\"contents\":\"myX,myY\\n1979,7.19\\n1980,7.83\\n1981,7.24\\n1982,7.44\\n1983,7.51\\n1984,7.1\\n1985,6.91\\n1986,7.53\\n1987,7.47\\n1988,7.48\\n1989,7.03\\n1990,6.23\\n1991,6.54\\n1992,7.54\\n1993,6.5\\n1994,7.18\\n1995,6.12\\n1996,7.87\\n1997,6.73\\n1998,6.55\\n1999,6.23\\n2000,6.31\\n2001,6.74\\n2002,5.95\\n2003,6.13\\n2004,6.04\\n2005,5.56\\n2006,5.91\\n2007,4.29\\n2008,4.72\\n2009,5.38\\n2010,4.92\\n2011,4.61\\n2012,3.62\\n2013,5.35\\n2014,5.28\\n2015,4.63\\n2016,4.72\"}],\"jsons\":[]}"}</script></div> 