{"main":{"slug":"MapLabels.svg.svelte","contents":"<!--\n  @component\n  Adds SVG text labels based features in the data or a custom GeoJSON Feature Collection.\n -->\n<script>\n  import { getContext } from 'svelte';\n\n  const { data, width, height } = getContext('LayerCake');\n\n  /** @type {Function} projection - A D3 projection function. Pass this in as an uncalled function, e.g. `projection={geoAlbersUsa}`. */\n  export let projection;\n\n  /** @type {Function} getLabel - An accessor function to get the field to display. */\n  export let getLabel;\n\n  /** @type {number|undefined} [fixedAspectRatio] - By default, the map fills to fit the $width and $height. If instead you want a fixed-aspect ratio, like for a server-side rendered map, set that here. */\n  export let fixedAspectRatio = undefined;\n\n  /** @type {Function} [getCoordinates=d => d.geometry.coordinates] - An accessor function to get the `[x, y]` coordinate field. Defaults to a GeoJSON feature format. */\n  export let getCoordinates;\n\n  /** @type {Array<Object>|undefined} [features] - A list of labels as GeoJSON features. If unset, the plotted features will defaults to those in `$data.features`, assuming this field a list of GeoJSON features. */\n  export let features = undefined;\n\n  $: fitSizeRange = fixedAspectRatio ? [100, 100 / fixedAspectRatio] : [$width, $height];\n\n  $: projectionFn = projection().fitSize(fitSizeRange, $data);\n</script>\n\n<g class=\"map-labels\">\n  {#each features || $data.features as d}\n    {@const coords = projectionFn(getCoordinates(d))}\n    <text class=\"map-label\" x={coords[0]} y={coords[1]}>{getLabel(d)}</text>\n  {/each}\n</g>\n\n<style>\n  .map-labels {\n    pointer-events: none;\n  }\n  .map-label {\n    color: #333;\n    /**\n     * If you render this in an ScaledSvg layout component, you'll\n     * want to make this like 1px bc it's actually being zoomed by about 10x\n     */\n    font-size: 8px;\n    text-anchor: middle;\n  }\n</style>"},"dek":"","usedIn":[{"group":"Regular","matches":[]},{"group":"SSR","matches":[]}],"hasjsDoctable":true,"jsdocParsed":[{"kind":"type","type":"Function","name":"projection","required":true,"defaultValue":null,"description":"A D3 projection function. Pass this in as an uncalled function, e.g. `projection={geoAlbersUsa}`."},{"kind":"type","type":"Function","name":"getLabel","required":true,"defaultValue":null,"description":"An accessor function to get the field to display."},{"kind":"type","type":"number|undefined","name":"fixedAspectRatio","required":false,"defaultValue":null,"description":"By default, the map fills to fit the $width and $height. If instead you want a fixed-aspect ratio, like for a server-side rendered map, set that here."},{"kind":"type","type":"Function","name":"getCoordinates","required":false,"defaultValue":"d => d.geometry.coordinates","description":"An accessor function to get the `[x, y]` coordinate field. Defaults to a GeoJSON feature format."},{"kind":"type","type":"Array<Object>|undefined","name":"features","required":false,"defaultValue":null,"description":"A list of labels as GeoJSON features. If unset, the plotted features will defaults to those in `$data.features`, assuming this field a list of GeoJSON features."}],"componentDescription":"\n  Adds SVG text labels based features in the data or a custom GeoJSON Feature Collection.\n \n","modules":[]}