{"main":{"slug":"Voronoi.svelte","contents":"<!--\n  @component\n  Generates a voronoi layer using [d3-delauney](https://github.com/d3/d3-delauney).\n -->\n<script>\n  import { getContext, createEventDispatcher } from 'svelte';\n  import { uniques } from 'layercake';\n  import { Delaunay } from 'd3-delaunay';\n\n  const { data, xGet, yGet, width, height } = getContext('LayerCake');\n\n  /** @type {String|undefined} [stroke] - An optional stroke color, which is likely only useful for testing to make sure the shapes drew correctly. */\n  export let stroke = undefined;\n\n  let dispatcher = createEventDispatcher();\n\n  function log(point) {\n    console.log(point, point.data);\n    dispatcher('voronoi-mouseover', point);\n  }\n\n  $: points = $data.map(d => {\n    const point = [$xGet(d), $yGet(d)];\n    point.data = d;\n    return point;\n  });\n\n  $: uniquePoints = uniques(points, d => d.join(), false);\n\n  $: voronoi = Delaunay.from(uniquePoints).voronoi([0, 0, $width, $height]);\n</script>\n\n{#each uniquePoints as point, i}\n  <path\n    style=\"stroke: {stroke}\"\n    class=\"voronoi-cell\"\n    d={voronoi.renderCell(i)}\n    on:mouseover={() => {\n      log(point);\n    }}\n    on:focus={() => {\n      log(point);\n    }}\n    role=\"tooltip\"\n  ></path>\n{/each}\n\n<style>\n  .voronoi-cell {\n    fill: none;\n    stroke: none;\n    pointer-events: all;\n    outline: none;\n  }\n\n  /* Useful to testing but you'll want to disable this for production */\n  .voronoi-cell:hover {\n    stroke: #333 !important;\n    stroke-width: 3px;\n  }\n</style>"},"dek":"","usedIn":[{"group":"Regular","matches":["/example/Scatter"]},{"group":"SSR","matches":[]}],"hasjsDoctable":true,"jsdocParsed":[{"kind":"type","type":"String|undefined","name":"stroke","required":false,"defaultValue":null,"description":"An optional stroke color, which is likely only useful for testing to make sure the shapes drew correctly."}],"componentDescription":"\n  Generates a voronoi layer using [d3-delauney](https://github.com/d3/d3-delauney).\n \n","modules":[]}